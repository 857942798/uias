!function(b,a){typeof exports==="object"&&typeof module==="object"?module.exports=a():typeof define==="function"&&define.amd?define(a):(typeof exports==="object"?exports.CSMFUI=a():b.CSMFUI=a())}(this,function(){return function(){var e={};var g={};var b={};var d={};var f={mixins:{},services:{}};var a={};f.component=function(i,h){e[i]=h};f.directive=function(i,h){g[i]=h};f.util=function(i,h){b[i]=h};f.service=function(i,h){d[i]=h};f.mixin=function(i,h){a[i]=h};function c(k){var j=k.mixins||[];if(j&&j.length){var h=[];for(var l=0;l<j.length;l++){var o=a[j[l]];if(o){h.push(o())}}if(h.length>0){k.mixins=h}}}f.install=function(o,j){for(var i in a){if(i==="csmf-mixin-cmpt-event"){o.mixin(a[i]())}else{f.mixins[i]=a[i]()}}for(var l in d){f.services[l]=d[l]()}for(var m in b){o.prototype["$"+m]=b[m]()}for(var n in g){o.directive(n,g[n])}for(var k in e){var h=e[k];c(h);o.component(k,h)}};return f}()});CSMFUI.component("csmf-button",{name:"csmf-button",template:'<span class="csmf-button" v-show="visible"><el-button    v-bind="cmptAttrs"    v-on="cmptListeners"    @click.native="buttonClick">    <template v-if="buttonText!=\'\' && buttonText !=null" >{{buttonText}}</template></el-button></span>',data:function(){return{}},mixins:["csmf-mixin-cmpt"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(ELEMENT.Button.props,{id:a.cmpt.cmpt_code,type:a.cmpt.type||a.cmpt.btncss,title:a.cmpt.title||a.cmpt.text},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({})},buttonText:function(){var a=this;return a.cmpt.cmpt_name||a.$attrs.text},visible:function(){var a=this;var b=(a.cmpt.span+""==="0");if(b){a.$emit("cmpt-visible",a.cmpt.cmpt_id,false);return false}else{a.$emit("cmpt-visible",a.cmpt.cmpt_id,true);return true}}},methods:{buttonClick:function(a){this.handle_button_click(a)},_handler:function(){var a=this,b=[].slice.call(arguments);b=["cmpt-event"].concat(b);a.$emit.apply(a,b)},handle_button_click:function(e){var self=this;var handleFunc=this.cmpt.click;var handleParam=this.cmpt.param;if(handleFunc){if(handleParam&&handleParam.indexOf(",")===0){handleParam=this.cmpt.param.substring(1)}else{if(typeof handleParam==="undefined"){handleParam=""}}if(handleParam===""){eval("this._handler('"+handleFunc+"')")}else{eval("this._handler('"+handleFunc+"',"+handleParam+")")}}else{self.$notify.error({title:"function error",message:"The click event handler for the button["+this.cmpt.cmpt_code+"] is empty or not a valid function；"})}}}});Vue.component("csmf-container",{name:"csmf-container",componentName:"CsmfContainer",props:{layout:{type:[String,Object],"default":function(){return{type:"default"}}},gutter:Number,span:{type:Number,"default":24},flex:{type:Number},tag:{type:String,"default":"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},computed:{layout_gutter:function(){var a=this.$parent;while(a&&a.$options.componentName!=="CsmfContainer"){a=a.$parent}return a?a.getLayout().gutter:0}},render:function(b){if(this.getLayout().type==="fit"){return this.getFitRender(b)}else{if(this.getLayout().type==="border"){return this.getBorderRender(b)}else{if(this.getLayout().type==="column"){return this.getColumnRender(b)}else{if(this.getLayout().type==="hbox"){return this.getHboxRender(b)}else{if(this.getLayout().type==="vbox"){return this.getVboxRender(b)}else{var a=this.$parent;if(a&&a.$options.componentName==="CsmfContainer"){if(a.getLayout().type==="column"){return this.getColumnItemRender(b)}else{if(a.getLayout().type==="hbox"){return this.getHboxItemRender(b)}else{if(a.getLayout().type==="vbox"){return this.getVboxItemRender(b)}}}}return this.getDefaultRender(b)}}}}}},methods:{getLayout:function(){var a={};if(this.layout){if(Object.prototype.toString.call(this.layout)==="[object String]"){return{type:this.layout}}return this.layout}},addSlotClass:function(b,c){var a=b;if(c){c.forEach(function(d){if(!a){a=d}else{a=a.replace(d,"")+(" "+d)}})}return a},createSlots:function(c,a){var b=this.getFirstElement(c);if(!b){return null}const d=b.data=b.data||{};d.staticClass=this.addSlotClass(d.staticClass,a["class"]);return b},getFirstElement:function(c){if(!Array.isArray(c)){return null}var b=null;for(var a=0;a<c.length;a++){if(c[a]){if(c[a].tag){b=c[a]}else{return this.$createElement("div",[c[a]])}}}return b},checkHasSlot:function(a){return this.$slots[a]&&this.$slots[a].length>0},getDefaultRender:function(a){return a("div",{"class":["csmf-container"]},this.$slots["default"])},getFitRender:function(a){return a("div",{"class":["csmf-container","csmf-layout-fit"]},this.$slots["default"])},getBorderRender:function(a){return a("div",{"class":["csmf-container","csmf-layout-border","csmf-container-vertical"]},[this.createSlots(this.$slots.north,{"class":["csmf-container","csmf-layout-border-north"]}),a("div",{"class":["csmf-container","csmf-layout-border","csmf-container-horizontal"]},[this.createSlots(this.$slots.west,{"class":["csmf-container","csmf-layout-border-west"]}),this.createSlots(this.$slots.center,{"class":["csmf-container","csmf-layout-border-center"]}),this.createSlots(this.$slots.east,{"class":["csmf-container","csmf-layout-border-east"]})]),this.createSlots(this.$slots.south,{"class":["csmf-container","csmf-layout-border-south"]})])},getColumnRender:function(b){var a={};if(this.getLayout().gutter){a.marginLeft="-"+(this.getLayout().gutter/2)+"px";a.marginRight=a.marginLeft}return b("div",{"class":["csmf-container","csmf-layout-column"],style:a},this.$slots["default"])},getColumnItemRender:function(c){var a=this,d=[];var b={};if(this.layout_gutter){b.paddingLeft=this.layout_gutter/2+"px";b.paddingRight=b.paddingLeft}["span","offset","pull","push"].forEach(function(e){if(a[e]||a[e]===0){d.push(e!=="span"?"csmf-layout-column-item-"+e+"-"+a[e]:"csmf-layout-column-item-"+a[e])}});["xs","sm","md","lg","xl"].forEach(function(e){if(typeof a[e]==="number"){d.push("csmf-layout-column-item-"+e+"-"+a[e])}else{if(typeof a[e]==="object"){var f=a[e];Object.keys(f).forEach(function(g){d.push(g!=="span"?"csmf-layout-column-item-"+e+"-"+g+"-"+f[g]:"csmf-layout-column-item-"+e+"-"+f[g])})}}});return c(this.tag,{"class":["csmf-layout-column-item",d],style:b},this.$slots["default"])},getHboxRender:function(b){var a={};var c=Object.assign({justify:"start",align:"top",},this.getLayout());if(this.getLayout().gutter){a.marginLeft="-"+(this.getLayout().gutter/2)+"px";a.marginRight=a.marginLeft}return b("div",{"class":["csmf-container","csmf-layout-hbox","is-justify-"+c.justify,"is-align-"+c.align],style:a},this.$slots["default"])},getHboxItemRender:function(b){var a={};if(this.flex){a.flex=this.flex}if(this.layout_gutter){a.paddingLeft=this.layout_gutter/2+"px";a.paddingRight=a.paddingLeft}return b(this.tag,{"class":["csmf-layout-hbox-item"],style:a},this.$slots["default"])},getVboxRender:function(b){var a={};var c=Object.assign({justify:"start",align:"top",},this.getLayout());if(this.getLayout().gutter){a.height="calc(100% + "+(this.getLayout().gutter+"px")+")";a.marginTop="-"+(this.getLayout().gutter/2)+"px";a.marginBottom=a.marginTop}return b("div",{"class":["csmf-container","csmf-layout-vbox","is-justify-"+c.justify,"is-align-"+c.align],style:a},this.$slots["default"])},getVboxItemRender:function(b){var a={};if(this.flex){a.flex=this.flex}if(this.layout_gutter){a.paddingTop=this.layout_gutter/2+"px";a.paddingBottom=a.paddingTop}return b(this.tag,{"class":["csmf-layout-vbox-item"],style:a},this.$slots["default"])}}});CSMFUI.component("csmf-countdown",{name:"csmf-countdown",template:'<span class="csmf-countdown"><el-time-picker     v-show="!viewMode"    v-model="countVal"    readonly    value-format="HH:mm:ss"></el-time-picker><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',data:function(){return{interval:null,countVal:""}},props:{cmpt:{},value:{"default":function(){return"00:05:00"}},srcvm:{}},watch:{value:function(a){if(a!==this.countVal){this.init()}},countVal:function(a){this.$emit("input",a)}},computed:{viewMode:function(){return !!this.cmpt.disabled},rawValue:function(){return this.countVal}},methods:{sec_to_time:function(e){var c;if(e>-1){var a=Math.floor(e/3600);var b=Math.floor(e/60)%60;var d=e%60;if(a<10){c="0"+a+":"}else{c=a+":"}if(b<10){c+="0"}c+=b+":";if(d<10){c+="0"}c+=d.toFixed(2)}return c},init:function(){var a=this,d=this.value||"00:05:00";var b=d.split(":");if(b.length!==3){return}var c=parseInt(b[0])*3600+parseInt(b[1])*60+parseInt(b[2]);clearInterval(a.interval);a.interval=setInterval(function(){c--;a.countVal=a.sec_to_time(c);if(c===0){c=parseInt(b[0])*3600+parseInt(b[1])*60+parseInt(b[2]);a.$emit("cmpt-event","el_countdown_event",a.cmpt.cmpt_code,a.dv,this.srcvm)}},1000)}},mounted:function(){var a=this;setTimeout(function(){a.init()},1000)},beforeDestroy:function(){clearInterval(this.interval)}});CSMFUI.component("csmf-countdown-select",{name:"csmf-countdown-select",template:'<span class="csmf-countdown-select"><el-select size="mini" v-model="countVal"           @change="handleTimeCountChange">    <el-option v-for="(option,index) in cmpt.options"                :label="option.text"               :value="option.id+\'\'"                :key="option.id"></el-option></el-select></span>',data:function(){return{interval:null,countVal:0}},props:{cmpt:{},value:{},srcvm:{}},mixins:["csmf-mixin-cmpt-option"],watch:{value:function(a){if(a!==this.countVal){this.init()}},countVal:function(a){this.$emit("input",a)}},methods:{checkPeriod:function(b){var a=false;this.cmpt.options.forEach(function(c){if(c.id+""===b+""){a=true}});return a},init:function(c){var a=this,b=a.cmpt.default_param||a.cmpt.default_value;if(typeof c!=="undefined"){b=c}if(typeof b==="undefined"||!a.checkPeriod(b)){b="0"}clearInterval(a.interval);a.countVal=b;if(b>0){a.interval=setInterval(function(){a.$emit("cmpt-event","el_countdown_select_event",a.cmpt.cmpt_code,a.countVal,this.srcvm)},b*1000)}},handleTimeCountChange:function(a){this.init(a)}},created:function(){this._loadOptions(this.cmpt)},mounted:function(){if(this.cmpt){this.init()}}});CSMFUI.component("csmf-divider",{name:"csmf-divider",template:'<el-divider :content-position="cmpt.content_position" v-html="cmpt.cmpt_name"></el-divider>',props:["cmpt","value","srcvm"],data:function(){return{}}});CSMFUI.component("csmf-iframe-tabs",{name:"csmf-iframe-tabs",props:["tabs","activeTab"],template:'<div class="csmf-iframe-tabs"><el-tabs @contextmenu.prevent.native="openContextMenu($event)" v-model="activeTab" type="card" @tab-remove="removeTab" @tab-click="clickTab" class="csmf-iframe-tabs__wrap">    <el-tab-pane v-for="(item, index) in tabs" :key="item.name" :closable="item.closable" :label="item.title" :name="item.name">        <business-iframe :params="item.params"></business-iframe>    </el-tab-pane></el-tabs></div>',mounted:function(){var d=this;var e='<div class="el-tabs-header-edit-menu" style="display: none;visibility: hidden;opacity: 0;"><el-dropdown @command="handleCommand" trigger="click" @visible-change="visibleChange">    <span class="el-dropdown-link">&nbsp;<i class="el-icon-arrow-down"></i>&nbsp;</span>    <el-dropdown-menu slot="dropdown" class="el-tabs-header-dropdown-menu" style="opacity: 0;">        <el-dropdown-item icon="el-icon-refresh" command="reload_curr">刷新当前</el-dropdown-item>        <el-dropdown-item :disabled="canclosecurr" icon="el-icon-circle-close" command="close_curr">关闭当前</el-dropdown-item>        <el-dropdown-item :disabled="cancloseother" icon="el-icon-circle-close" command="close_other">关闭其它</el-dropdown-item>    </el-dropdown-menu></el-dropdown></div>';var c=Vue.component("editMenu",{render:Vue.compile(e).render});var b=Vue.extend(c);var a=new b({parent:d,data:function(){return{closable:false,closeotherable:false}},computed:{canclosecurr:function(){return !d.contextMenu.closecurr},cancloseother:function(){return !d.contextMenu.closeother}},methods:{handleCommand:d.handleContextMenu,visibleChange:function(g){d.contextMenu.visible=g;if(!g){var f=$(".el-tabs-header-dropdown-menu");f.css("opacity",0)}}}});a.$mount();this.$el.querySelector(".el-tabs__header").appendChild(a.$el)},data:function(){return{targetName:"",contextMenu:{visible:false,closecurr:false,closeother:false}}},watch:{tabs:function(c,a){var d=this;if(c.length>1){for(var b=0;b<c.length;b++){d.$set(d.tabs[b],"closable",true)}d.contextMenu.closecurr=true;d.contextMenu.closeother=true}else{if(c.length===1){d.$set(d.tabs[0],"closable",false);d.contextMenu.closecurr=false;d.contextMenu.closeother=false}}}},methods:{handleContextMenu:function(c){var b=this,a=b.targetName;if(c==="reload_curr"){b.reloadTab(a)}else{if(c==="close_curr"){b.removeTab(a)}else{if(c==="close_other"){b.removeOtherTab(a)}}}},openContextMenu:function(c){var b=this;if($(c.target).hasClass("el-tabs__item")){b.targetName=c.target.id.split("-")[1];var d=$(".el-tabs-header-dropdown-menu");function a(){$(".el-tabs-header-edit-menu .el-dropdown-link").click();setTimeout(function(){d.css("left",c.clientX-c.offsetX);d.css("top",c.clientY-c.offsetY+c.target.clientHeight+2);d.css("opacity",1)},100)}if(b.contextMenu.visible){$(document.body).click();d.css("opacity",0);setTimeout(function(){a()},100)}else{a()}}else{b.targetName=""}},reloadTab:function(a){var b=this;b.tabs.forEach(function(d,c){if(d.name===a){var e=JSON.parse(JSON.stringify(d));e.params._dc=new Date().getTime();b.$set(b.tabs,c,e)}})},removeIframe:function(c){var b=document.getElementById("frame_"+c),a;if(b){a=b.contentWindow;b.src="about:blank";if(a){try{a.document.write("");a.document.clear()}catch(d){}}b.parentNode.removeChild(b)}},removeOtherTab:function(c){var d=this;if(d.tabs.length===1){return}var b=d.tabs;for(var a=0;a<b.length;a++){if(b[a].name!==c){d.removeIframe(b[a].name)}}d.activeTab=c;d.tabs=b.filter(function(e){return e.name===c});d.$emit("update:tabs",d.tabs);d.$emit("update:activeTab",d.activeTab)},removeTab:function(b){var d=this;if(d.tabs.length===1){d.$message({message:"唯一标签页无法关闭",showClose:true,type:"warning"});return}d.removeIframe(b);var a=d.tabs,c;a.forEach(function(g,f){if(g.name===b){var e=a[f+1]||a[f-1];if(e){c=e.name}}});d.activeTab=c;d.tabs=a.filter(function(e){return e.name!==b});d.$emit("update:tabs",d.tabs);d.$emit("update:activeTab",d.activeTab)},clickTab:function(){var a=this;a.$emit("update:activeTab",this.activeTab)},addTab:function(e){var d=this,c=d.tabs,b=false,a;for(a=0;a<c.length;a++){if(c[a].name===e.name){b=true;break}}if(!b){d.$emit("beforeadd",e);d.tabs.push(e)}d.activeTab=e.name;d.$emit("update:tabs",d.tabs);d.$emit("update:activeTab",d.activeTab)}},components:{"business-iframe":{name:"business-iframe",props:["params"],template:'<div style="font-size: 0;"><iframe :ref="frameId":id="frameId" :name="frameId" frameborder="0" width="100%" height="100%" src="about:blank"></iframe></div>',computed:{frameId:function(){return"frame_"+this.params.businessId}},methods:{loadIframeContent:function(){var b=this.$refs[this.frameId];if(b&&this.params&&this.params.url){var a=this.params.url.replace("{businessId}",this.params.businessId);if(a!=null&&a!==""){b.src=a}}}},mounted:function(){this.loadIframeContent()},updated:function(){this.loadIframeContent()},beforeDestroy:function(){var b=this.$refs[this.frameId],a;if(b){a=b.contentWindow;b.src="about:blank";if(a){try{a.document.write("");a.document.clear()}catch(c){}}b.parentNode.removeChild(b)}}}}});CSMFUI.component("csmf-imgtime",{name:"csmf-imgtime",template:'<div class="plan-next-time" >    <div class="plan-next-time-title">{{cmpt.placeholder}}</div>    <el-row class="plan-next-time-box" :gutter="12">        <el-col :span="12">            <span class="time" v-text="transferImgTimeObj(\'hh:mm\')"></span>        </el-col>        <el-col :span="12">            <div class="date">                <span class="day" v-text="transferImgTimeObj(\'yyyy-MM-dd\')"></span>                <span class="week" v-text="transferImgTimeObj(\'EEE\')"></span>            </div>        </el-col>    </el-row></div>',props:["cmpt","value","srcvm"],data:function(){return{}},computed:{dv:{get:function(){return this.value},set:function(a){this.$emit("input",a)}}},methods:{transferImgTimeObj:function(c){var b=new Date(this.dv);if(b.toString()!=="Invalid Date"){var a=["日","一","二","三","四","五","六"];switch(c){case"hh:mm":return b.Format("hh:mm");case"yyyy-MM-dd":return b.Format("yyyy-MM-dd");case"EEE":return"星期"+a[b.getDay()]}}else{switch(c){case"hh:mm":return b.Format("/:/");case"yyyy-MM-dd":return b.Format("/-/-/");case"EEE":return"星期/"}}}}});CSMFUI.component("csmf-info",{name:"csmf-info",template:'<span v-html="cmpt.placeholder"></span>',props:["cmpt","value","srcvm"],data:function(){return{}}});CSMFUI.component("csmf-panel",{name:"csmf-panel",componentName:"CsmfPanel",props:{},render:function(a){return a("div",{"class":["csmf-panel"]},[this.$slots.title&&a("div",{"class":["csmf-panel-title"]},this.$slots.title),a("div",{"class":["csmf-panel-body"]},[this.createSlots(this.$slots.topbar,{"class":["csmf-panel-topbar"]}),this.createSlots(this.$slots.body,{"class":["csmf-panel-main"]}),this.createSlots(this.$slots.bottombar,{"class":["csmf-panel-bottombar"]})])])},methods:{addSlotClass:function(b,c){var a=b;if(c){c.forEach(function(d){if(!a){a=d}else{a=(d+" ")+a.replace(d,"")}})}return a},createSlots:function(c,a){var b=this.getFirstElement(c);if(!b){return null}const d=b.data=b.data||{};d.staticClass=this.addSlotClass(d.staticClass,a["class"]);return b},getFirstElement:function(c){if(!Array.isArray(c)){return null}var b=null;for(var a=0;a<c.length;a++){if(c[a]){if(c[a].tag){b=c[a]}else{return this.$createElement("div",[c[a]])}}}return b}}});CSMFUI.component("csmf-pass-template",{name:"csmf-pass-template",render:function(){if(this.$scopedSlots["default"]!=null){return this.$scopedSlots["default"](this.$attrs)}}});CSMFUI.component("csmf-render-url-content",{name:"csmf-render-url-content",template:"<div></div>",props:{renderParams:{required:true},loading:{type:Boolean}},data:function(){return{loadingId:""}},watch:{renderParams:function(a,b){if(JSON.stringify(b)!==JSON.stringify(a)){this.loadContent()}}},methods:{renderIFrame:function(d){var b=this;d=typeof d==="undefined"?b.renderParams.url:d;var a="IFRAME_"+Math.floor(Math.random()*1000000);$(b.$el).prepend('<iframe id="'+a+'" src="about:blank" frameborder="0" width="100%" height="100%" style="display: block;"></iframe>');(function e(){setTimeout(function(){var f=document.querySelector("#"+a);var g=f.contentDocument||(f.contentWindow&&f.contentWindow.document);if(g){c(f)}else{e()}},10)})();function c(f){if(f&&d!=null&&d!==""){$.ajax({type:"GET",url:d,success:function(g){var h=f.contentDocument||f.contentWindow.document;h.open();h.write(g);h.close();b.maskLoading(false);if(b.renderParams.afterLoad){b.renderParams.afterLoad.apply(b)}},error:function(){b.maskLoading(false);if(b.renderParams.afterLoad){b.renderParams.afterLoad.apply(b)}}})}else{b.maskLoading(false);if(b.renderParams.afterLoad){b.renderParams.afterLoad.apply(b)}}}},renderPage:function(){var a=this;$.ajax({type:"GET",url:"template/page/"+a.renderParams.businessId,dataType:"json",success:function(d){if(d.code!==0){a.$message.error(a.$t(d.message));return}var e="";top.window.tempId=d.result.tmpl_id;var c=d.result.tmpl_id+""=="20028"||d.result.tmpl_id+""=="20029"||d.result.tmpl_id+""=="20031"||d.result.tmpl_id+""=="20032"||d.result.tmpl_id+""=="20030";if(c){e=d.result.tmpl_url.replace("{templateId}",d.result.tmpl_id).replace("{businessId}",a.renderParams.globalBusinessId).replace("{pageBusId}",a.renderParams.businessId);a.renderDom(e)}else{e="loadMainPageFrame/v2/"+a.renderParams.businessId;a.renderIFrame(e)}},error:function(b){a.maskLoading(false);if(a.renderParams.afterLoad){a.renderParams.afterLoad.apply(a)}}})},renderDom:function(b,c,d){var a=this;b=typeof b==="undefined"?a.renderParams.url:b;c=typeof c==="undefined"?a.renderParams.async:c;d=typeof d==="undefined"?a.renderParams.direct:d;ajaxRefreshDiv(a.$el,b,c,d);a.maskLoading(false);if(a.renderParams.afterLoad){a.renderParams.afterLoad.apply(a)}},loadContent:function(){var a=this;$(a.$el).empty();if(a.renderParams&&JSON.stringify(a.renderParams)!=="{}"){a.maskLoading(true);if(Object.prototype.toString.call(a.renderParams)==="[object String]"){a.renderDom(a.renderParams,true,true)}else{if(Object.prototype.toString.call(a.renderParams)==="[object Object]"){if(a.renderParams.mode==="page"){a.renderPage()}else{if(a.renderParams.mode==="iframe"){a.renderIFrame()}else{a.renderDom()}}}}}},maskLoading:function(a){var b=this;if(b.loading){b.$spin(a)}}},mounted:function(){this.loadContent()}});CSMFUI.directive("textMore",(function(){function a(d){if(!Vue.prototype.$domUtil.hasClass("show-more")){Vue.prototype.$domUtil.addClass(d,"ellipsis");var c=document.createRange();c.setStart(d,0);c.setEnd(d,d.childNodes.length);var b=c.getBoundingClientRect().width;var f=(parseInt(Vue.prototype.$domUtil.getStyle(d,"paddingLeft"),10)||0)+(parseInt(Vue.prototype.$domUtil.getStyle(d,"paddingRight"),10)||0);if((b+f>d.offsetWidth||d.scrollWidth>d.offsetWidth)){var e=$(d).find(".t-more");if(e.length===0){e=document.createElement("span");e.innerText="更多";e.className="t-more";Vue.prototype.$domUtil.addClass(d,"show-more");d.appendChild(e);Vue.prototype.$domUtil.off(e,"click");Vue.prototype.$domUtil.on(e,"click",function(){if(Vue.prototype.$domUtil.hasClass(d,"ellipsis")){Vue.prototype.$domUtil.removeClass(d,"ellipsis");e.innerText="收起"}else{Vue.prototype.$domUtil.addClass(d,"ellipsis");e.innerText="更多"}})}}else{var e=$(d).find(".t-more");if(e.length!==0){Vue.prototype.$domUtil.off(e,"click");$(e).remove()}}}}return{componentUpdated:function(b){a(b)}}})());CSMFUI.directive("textTip",(function(){return{bind:function(b){var c=null;var a=Vue.extend(ELEMENT.Tooltip);b.onmouseenter=function(f){var e=document.createRange();e.setStart(b,0);e.setEnd(b,b.childNodes.length);var d=e.getBoundingClientRect().width;var g=(parseInt(Vue.prototype.$domUtil.getStyle(b,"paddingLeft"),10)||0)+(parseInt(Vue.prototype.$domUtil.getStyle(b,"paddingRight"),10)||0);if((d+g>b.offsetWidth||b.scrollWidth>b.offsetWidth)){c=new a({propsData:{placement:"top"}});c.$mount();c.content=b.innerText||b.textContent;c.referenceElm=b;c.$refs.popper&&(c.$refs.popper.style.display="none");c.doDestroy();c.setExpectedState(true);(_.debounce(function(h){h.handleShowPopper()},500))(c)}};b.onmouseleave=function(){if(c){c.$destroy()}}},unbind:function(){}}})());CSMFUI.component("csmf-toolbar",{name:"csmf-toolbar",template:'<span class="csmf-toolbar">    <template v-for="(cmpt,index) in lineTools">        <component :is="\'csmf-\'+ cmpt.cmpt_type"                    :key="cmpt.cmpt_id"                    :cmpt="cmpt"                    :srcvm="srcvm"                   v-on:cmpt-event="_handleEvent"                   ></component>    </template>    <el-dropdown v-show="isShowDrop">        <el-button>更多<i class="el-icon-arrow-down el-icon--right"></i></el-button>        <el-dropdown-menu slot="dropdown">            <el-dropdown-item v-for="(cmpt,index) in dropTools" :key="cmpt.cmpt_code">                <component :is="\'csmf-\'+ cmpt.cmpt_type"                            :key="cmpt.cmpt_id"                            :cmpt="cmpt"                            :srcvm="srcvm"                           type="text"                           size="mini"                           v-on:cmpt-event="_handleEvent"                           ></component>            </el-dropdown-item>        </el-dropdown-menu>    </el-dropdown></span>',props:["cmpt","attrs","srcvm","limit"],computed:{tools:function(){if(this.cmpt.toolList){return this.cmpt.toolList}else{return this.cmpt||[]}},toolbarLimit:function(){var a=this;if(a.attrs){return a.attrs["toolbar-limit"]||a.attrs.toolbar_limit||10000000}return this.limit||1000000},lineTools:function(){var b=this,a=0,c=[];this.tools.forEach(function(d){if(a<b.toolbarLimit){c.push(d);if(d.span+""!=="0"){a++}}});return c},dropTools:function(){var b=this,a=0,c=[];this.tools.forEach(function(d){if(d.span+""!=="0"){a++}if(a>b.toolbarLimit){c.push(d)}});return c},isShowDrop:function(){var a=false;this.dropTools.forEach(function(b){if(b.span+""!=="0"){a=true}});return a}}});CSMFUI.component("csmf-undefined",{name:"csmf-undefined",template:"<span>undefined</span>",props:["cmpt","value","srcvm"]});CSMFUI.component("csmf-form",{name:"csmf-form",componentName:"CsmfForm",template:'<div class="csmf-form">    <div class="csmf-form-body">        <el-form class="" ref="elForm" :model="model" :rules="rules" :label-width="labelWidth" :label-position="labelPosition" v-bind="$attrs" @submit.native.prevent="">            <el-row :gutter="12" v-for="(cmpts,index) in layoutBodyItems" :key="index" class="el_form_auto_layout">                <template v-for="cmpt in cmpts">                    <el-col v-if="checkIsRender(cmpt)" v-show="checkIsShow(cmpt)" :span="cmpt.span" :offset="cmpt.offset"                            :style="formColStyle(cmpt)"                            :class="{\'el_form_auto_layout_toolbar\':cmpt.cmpt_type===\'toolbar\'}">                        <template v-if="cmpt.load_way !== \'url\'" >                            <csmf-form-item :model="model"                                            :cmpt="cmpt"                                            :srcvm="srcvm"                                            v-on:cmpt-event="_handleEvent">                            </csmf-form-item>                        </template>                        <template v-else>                            <csmf-render-url-content :render-params="computedRenderParam(cmpt)" style="width: 100%"></csmf-render-url-content>                        </template>                    </el-col>                </template>            </el-row>        </el-form>    </div>    <div class="csmf-form-footer">        <csmf-toolbar :cmpt="layoutFooterItems"             :srcvm="srcvm"             v-on:cmpt-event="_handleEvent">        </csmf-toolbar>    </div></div>',props:{id:{required:true},labelWidth:{type:String,"default":function(){return"112px"}},labelPosition:{type:String,"default":function(){return"right"}},model:{type:Object,required:true},rules:{type:Object},cmpts:{type:Array},layout:{type:String,"default":function(){return"qryForm"}},attrs:{type:Object},srcvm:{required:true}},data:function(){return{formLayout:"default"}},provide:function(){return{csmfForm:this}},created:function(){var a=this;a.$nextTick(function(){a.$refs.elForm.resetFields()})},computed:{layoutBodyItems:function(){if(this.layout&&this.cmpts){if(this.layout==="qryForm"){return CSMFUI.services.CSMF_FORM_LAYOUT.getQryFormLayoutBody(this.cmpts)}else{if(this.layout==="editForm"){this.formLayout="fit";return CSMFUI.services.CSMF_FORM_LAYOUT.getEditFormLayoutBody(this.cmpts)}else{return this.cmpts}}}},layoutFooterItems:function(){if(this.layout){if(this.layout==="qryForm"){return[]}else{if(this.layout==="editForm"){return CSMFUI.services.CSMF_FORM_LAYOUT.getEditFormLayoutFooter(this.cmpts)}else{return[]}}}},formColStyle:function(){return function(a){if(a.cmpt_type!=="toolbar"){return{"min-width":a.minWidth?a.minWidth+"px":"300px"}}}},computedRenderParam:function(){return function(a){if(a.load_url){return a.load_url.replace("{cmptId}",a.cmpt_id).replace("{layoutId}",this.id).replace("{businessId}",this.srcvm.businessId)}return""}}},methods:{checkIsShow:function(a){return a.span+""!=="0"&&a.cmpt_type!=="hidden"},checkIsRender:function(a){return a.is_hidden+""!=="1"&&a.is_hidden+""!=="2"},validate:function(){return this.$refs.elForm.validate.apply(this,arguments)},validateField:function(){return this.$refs.elForm.validateField.apply(this,arguments)},resetFields:function(){return this.$refs.elForm.resetFields.apply(this,arguments)},clearValidate:function(){return this.$refs.elForm.clearValidate.apply(this,arguments)}}});CSMFUI.component("csmf-form-field",{name:"csmf-form-field",template:'<component :is="cmptType"     :cmpt="cmpt"     :srcvm="srcvm"     v-model="model[cmpt.cmpt_code]"     v-on:cmpt-event="_handleEvent"     v-bind="extraAttrs"    class="csmf-form-field"    :class="{\'input_append_input\': !!cmpt.append_input }">        <template v-if="cmpt.prepend" slot="prepend">{{cmpt.prepend}}</template>        <template v-if="cmpt.append" slot="append">{{cmpt.append}}</template>        <template v-if="cmpt.append_input" slot="append">            <el-input slot="append" v-model="model[cmpt.cmpt_code+\'_append\']"                      :placeholder="cmpt.append_input">            </el-input>        </template></component>',props:{model:{}},data:function(){return{extraAttrs:{}}},mixins:["csmf-mixin-cmpt"],computed:{cmptType:function(){var c="csmf-";var b=c+"field-";var a=this.cmpt.cmpt_type;var d=this.cmpt.sub_type||this.cmpt.subType||this.cmpt.cmpt_type;if(["autocomplete","rate","richeditor","select","switch","slider","transfer"].indexOf(a)>=0){return b+a}else{if(["cascade","cascader"].indexOf(a)>=0){return b+"cascader"}else{if(["checkbox","checkboxgroup"].indexOf(a)>=0){return b+"checkbox"}else{if(["datepicker","date","week","month","monthrange","year","dates","daterange","datetime","datetimerange"].indexOf(a)>=0){this.extraAttrs={subType:d};return b+"datepicker"}else{if(["input","password","textarea"].indexOf(a)>=0){this.extraAttrs={subType:d==="input"?"text":d};return b+"input"}else{if(["inputlabel","inputLabel"].indexOf(a)>=0){return b+"inputlabel"}else{if(["number","numberrange"].indexOf(a)>=0){this.extraAttrs={subType:d};return b+"number"}else{if(["radio","radiobox"].indexOf(a)>=0){return b+"radio"}else{if(["timepicker","time","timeselect","timerange"].indexOf(a)>=0){this.extraAttrs={subType:d};return b+"timepicker"}else{if(["tree","treeselect"].indexOf(a)>=0){return b+"treeselect"}else{if(["timeCounter","countdown"].indexOf(a)>=0){return c+"countdown"}else{if(["line","divider"].indexOf(a)>=0){return c+"divider"}else{return c+a}}}}}}}}}}}}}},mounted:function(){}});CSMFUI.component("csmf-form-fieldset",{name:"csmf-form-fieldset",template:""});CSMFUI.component("csmf-form-item",{name:"csmf-form-item",componentName:"CsmfFormItem",template:'<el-form-item     class="csmf-form-item"     :class="formItemClass"     :label-width="tLabelWidth"     :label="tLabel"     :prop="cmpt.cmpt_code">    <template slot="label">        <csmf-form-item-label :cmpt="cmpt"></csmf-form-item-label>    </template>    <csmf-form-field :cmpt="cmpt" :model="model" :srcvm="srcvm" v-on:cmpt-event="_handleEvent"></csmf-form-field>    <csmf-form-field-debugger v-if="cmpt.debug" :cmpt="cmpt" :model="model"></csmf-form-field-debugger></el-form-item>',props:{cmpt:{},model:{},srcvm:{},label:{},labelWidth:{type:[String,Number]},labelPosition:{}},data:function(){return{isNested:false}},provide:function(){return{csmfFormItem:this}},computed:{form:function(){var a=this.$parent;if(a){var b=a.$options.componentName;while(b!=="CsmfForm"&&b!=="ElForm"){if(b==="CsmfFormItem"||b==="ElFormItem"){this.isNested=true}a=a.$parent;b=a.$options.componentName}}return a||this},isLabelHidden:function(){return this.labelWidth+""==="0"||this.labelWidth==="0px"},formItemClass:function(){var a={};a["el-form-item--label-"+this.tLabelPosition]=true;a["is-label-hidden"]=this.isLabelHidden;return a},tLabel:function(){return this.$utils.getDefinedValue(this.label,this.cmpt.cmpt_name)},tLabelWidth:function(){if(this.cmpt.cmpt_type==="toolbar"){return"0"}return this.$utils.getDefinedValue(this.labelWidth,this.form.labelWidth,this.cmpt.label_width,this.cmpt["label-width"],this.cmpt.labelWidth,"112px")+""},tLabelPosition:function(){return this.$utils.getDefinedValue(this.labelPosition,this.form.labelPosition,this.cmpt.label_position,this.cmpt["label-position"],this.cmpt.labelPosition,"top")}},methods:{get_field_div_class:function(a){var b=this.srcvm.$options.methods.fetchCmptInfo.apply(this.srcvm,["get_field_div_class",a]);if(!b||b==={}){if(a.validate&&a.validate.indexOf("validate_conn_field_required")>0){return{multi_required_field_div:true}}}}},components:{"csmf-form-item-label":{name:"csmf-form-item-label",template:'<span class="form_item_label" v-if="cmpt.cmpt_name">    <span class="form_item_text" v-html="cmpt.cmpt_name" v-text-tip></span>    <template v-if="cmpt.label_pop || cmpt.popovertip">        <el-popover class="form_item_pop" placement="top-start" trigger="hover">            <span v-html="cmpt.pop_content||cmpt.popovertip"></span>            <i slot="reference" class="el-icon-info"></i>        </el-popover>    </template></span>',props:{cmpt:{}},data:function(){return{}},computed:{showLabel:function(){}}},"csmf-form-field-debugger":{name:"csmf-form-field-debugger",template:'    <div style="margin-top: 0px; overflow: hidden;padding: 5px 0;line-height: 20px;">    组件类型：{{cmpt.cmpt_type}}<br>    组件代码：{{cmpt.cmpt_code}}<br>    组件值内容: {{model[cmpt.cmpt_code]}}<br>    组件值类型: {{Object.prototype.toString.call(model[cmpt.cmpt_code])}}<br>    组件属性：    <el-popover placement="top-start"                width="400"                trigger="click">        <span><pre style="font-size: 12px;font-family: inherit;color: #0C0600;max-height: 500px;overflow: auto">{{JSON.stringify(JSON.parse(JSON.stringify(cmpt)), null, 4)}}</pre></span>        <a slot="reference" type="text">点击查看</a>    </el-popover></div>',props:{cmpt:{},model:{}}}}});CSMFUI.service("CSMF_FORM_LAYOUT",function(){return{checkIsNotChildField:function(e,a){for(var d=0;d<e.length;d++){for(var c=0;c<e[d].length;c++){if(e[d][c].items){var b=e[d][c].items.split(",");if(b.indexOf(a.cmpt_code)>=0){return false}}}}return true},getFieldByCode:function(d,c){for(var b=0;b<d.length;b++){for(var a=0;a<d[b].length;a++){if(d[b][a].cmpt_code===c){return d[b][a]}}}},getChildFields:function(g,a){var d=this,c=[];if(a.items&&a.items.length>0){var b=a.items.split(",");for(var e=0;e<b.length;e++){var f=d.getFieldByCode(g,b[e]);if(f){c.push(f)}}}return c},getQryFormLayoutBody:function(f){var b=this;var e=[];var d=[];function a(i,g){g.is_hidden=g.is_hidden+"";var h=b.getChildFields(i,g);h=h.filter(function(j){return a(i,j)});if(h.length>0){g.children=h}if(g&&g.is_hidden!=="2"&&(g.is_addition!=="1"||b.attrs.isShowAdditionColumn)){if(g.place==="toolbar"||g.click==="simple_grid_search"||g.click==="reset_qryform_data"){d.push(g)}else{return g}}}function c(){for(var o=0;o<f.length;o++){var h=[];for(var m=0;m<f[o].length;m++){if(b.checkIsNotChildField(f,f[o][m])){var n=a(f,f[o][m]);if(n){h.push(n)}}}if(h.length>0){e.push(h)}}if(d.length>0){var p;if(e.length===0){p=[];e.push(p)}else{p=e[e.length-1]}var l=0;for(var g=0;g<p.length;g++){l+=((p[g].span||0)+(p[g].offset||0))}p.push({cmpt_type:"toolbar",place:"toolbar",span:24-l,offset:0,is_hidden:"",toolList:d})}}c();return e},getEditFormLayoutBody:function(g){var f=[];for(var e=0;e<g.length;e++){var b=g[e];var c=[];for(var d=0;d<b.length;d++){var a=b[d];if(a.place!=="toolbar"&&a.click!=="save_add_form_data"&&a.click!=="cancel_form_operator"&&a.click!=="save_edit_form_data"){a.is_hidden=a.is_hidden+"";if(a.is_hidden!=="2"){c.push(a)}}}f.push(c)}return f},getEditFormLayoutFooter:function(e){var f=[];for(var d=0;d<e.length;d++){var b=e[d];for(var c=0;c<b.length;c++){var a=b[c];if((a.cmpt_type==="button"&&a.place==="toolbar"&&!a.isreturn)||a.click==="save_add_form_data"||a.click==="cancel_form_operator"||a.click==="save_edit_form_data"){a.is_hidden=a.is_hidden+"";if(a.is_hidden!=="2"){f.push(a)}}}}return f}}});CSMFUI.component("csmf-field-autocomplate",{name:"csmf-field-autocomplate",template:'<span class="csmf-field-autocomplete"><el-autocomplete     v-show="!viewMode"    v-model="dv"    v-bind="cmptAttrs"    v-on="cmptListeners"    :fetch-suggestions="el_autocomplete_fetch_suggestions"><slot name="prepend" slot="prepend"></slot><slot name="append" slot="append"></slot></el-autocomplete><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:String}},data:function(){return{}},mixins:["csmf-mixin-cmpt"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(ELEMENT.Autocomplete.props,{clearable:a.isClearable,"prefix-icon":a.component["prefix-icon"]||a.component.icon_before,"suffix-icon":a.component["suffix-icon"]||a.component.icon_after,"trigger-on-focus":a.$utils.getDefinedValue(a.component["trigger-on-focus"],a.component.focusTrigger),"fetch-suggestions":a.el_autocomplete_fetch_suggestions},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({select:this.el_autocomplete_select})}},methods:{el_autocomplete_fetch_suggestions:function(c,b){var a=this.srcvm.$options.methods.fetchCmptInfo.apply(this.srcvm,["el_autocomplete_get_items",this.component.cmpt_code,c,this.srcvm]);return b(a)},el_autocomplete_select:function(a){this.$emit("cmpt-event","el_autocomplete_select_item",this.component.cmpt_code,a,this.srcvm)}}});CSMFUI.component("csmf-field-cascader",{name:"csmf-field-cascader",template:'<span class="csmf-field-cascader"><el-cascader     v-show="!viewMode"    v-model="dv"    v-bind="cmptAttrs"    v-on="cmptListeners"></el-cascader><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:Array}},data:function(){return{}},mixins:["csmf-mixin-cmpt","csmf-mixin-cmpt-option"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(ELEMENT.Cascader.props,{clearable:a.isClearable,filterable:a.isFilterable,props:{value:"id",label:"text",checkStrictly:a.component.change_on_click},"expand-trigger":"hover"},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({change:this.el_cascader_change})},dv:{get:function(){return this._getArrayValue(true,[])},set:function(a){this.$emit("input",a)}},rawValue:function(){return this._getOptionsRawValue(this.dv).join(", ")}},methods:{el_cascader_change:function(a){this.$emit("cmpt-event","el_cascade_change",this.component.cmpt_code,a,this.srcvm)},checkIsMultiple:function(b){if(this.$utils.isArray(b)){for(var a=0;a<b.length;a++){if(this.$utils.isArray(b[a])){return true}}}return false},_getOptionsRawValue:function(c){var a=this,d=[];if(a.component){var b=c||[];if(!this.checkIsMultiple(c)){b=[c]}b.forEach(function(e){var k=[],j="",h=null,f=a.component.options;for(var g=0;g<e.length;g++){j=e[g];h=(function(l,m){if(l&&l.length){for(var i=0;i<l.length;i++){if(m+""===l[i].id+""){return l[i]}}}})(f,j);if(h){k.push(h.text);if(h.children&&h.children.length){f=h.children}else{break}}else{break}}d.push(k.join("/"))})}return d}},created:function(){var a=this;a._loadTreeOptions(a.component)}});CSMFUI.component("csmf-field-checkbox",{name:"csmf-field-checkbox",template:'<span class="csmf-field-checkbox"><el-checkbox-group    v-show="!viewMode"    v-model="dv"    v-bind="cmptAttrs"    v-on="cmptListeners">    <template v-if="component.isCheckboxButton">        <el-checkbox-button v-for="option in component.options"         :label="option.id+\'\'" :key="option.id"         :name="component.cmpt_code"         :disabled="option.disabled">            {{option.text}}        </el-checkbox-button>    </template>    <template v-else>        <el-checkbox v-for="option in component.options"         :label="option.id+\'\'"         :key="option.id" :name="component.cmpt_code"         :disabled="!!option.disabled"         :style="component.optionWidth?{\'width\':component.optionWidth}:\'\'">            {{option.text}}        </el-checkbox>    </template></el-checkbox-group><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:Array}},data:function(){return{}},mixins:["csmf-mixin-cmpt","csmf-mixin-cmpt-option"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(ELEMENT.Checkbox.props,{},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({change:this.el_checkbox_change})},dv:{get:function(){return this._getArrayValue()},set:function(a){this.$emit("input",a)}},rawValue:function(){return this._getOptionsRawValue(this.dv).join(", ")}},methods:{el_checkbox_change:function(a){if(this.component.isCheckboxButton){this.$emit("cmpt-event","el_checkboxbutton_change",this.component.cmpt_code,a,this.srcvm)}else{this.$emit("cmpt-event","el_checkbox_change",this.component.cmpt_code,a,this.srcvm)}}},created:function(){this._loadOptions(this.component)}});CSMFUI.component("csmf-field-datepicker",{name:"csmf-field-datepicker",template:'<span class="csmf-field-datepicker"><el-date-picker     v-show="!viewMode"    v-model="dv"    v-bind="cmptAttrs"    v-on="cmptListeners"></el-date-picker><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:[String,Array]},subType:{required:true}},data:function(){return{}},mixins:["csmf-mixin-cmpt"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(null,{type:a.subType,clearable:a.isClearable,format:a.component.format||a.formatOptions[a.subType].format,"value-format":a.component["value-format"]||a.formatOptions[a.subType].valueFormat,"picker-options":a.pickerOptions,"range-separator":a.component["range-separator"]||a.$t("lang_key.csmf.import.to"),"start-placeholder":a.component["start-placeholder"]||a.$t("lang_key.csmf.import.startTime"),"end-placeholder":a.component["end-placeholder"]||a.$t("lang_key.csmf.import.endTime")},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({change:this.el_datepicker_change})},pickerOptions:function(){var a=this,b=a.component["picker-options"];if(!this.$utils.isEmpty(b)){b=JSON.parse(JSON.stringify(b))}return b||a.el_datepicker_picker_options()},formatOptions:function(){return{date:{format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd"},dates:{format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd"},week:{format:"yyyy-WW",valueFormat:"yyyy-MM-dd"},month:{format:"yyyy-MM",valueFormat:"yyyy-MM"},monthrange:{format:"yyyy-MM",valueFormat:"yyyy-MM"},year:{format:"yyyy",valueFormat:"yyyy"},datetime:{format:"yyyy-MM-dd HH:mm:ss",valueFormat:"yyyy-MM-dd HH:mm:ss"},daterange:{format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd"},datetimerange:{format:"yyyy-MM-dd HH:mm:ss",valueFormat:"yyyy-MM-dd HH:mm:ss"}}},dv:{get:function(){if(["monthrange","daterange","datetimerange","dates"].indexOf(this.subType)>=0){return this._getArrayValue()}else{return this.parse_date_format(this._getValue())}},set:function(a){if(["monthrange","daterange","datetimerange","dates"].indexOf(this.subType)>=0){a=a===null?[]:a}else{a=a===null?"":a}this.$emit("input",a)}},rawValue:function(){if(this.subType==="dates"){return this._getArrayRawValue(this.dv)}else{if(["monthrange","daterange","datetimerange"].indexOf(this.subType)>=0){return this._getRangeRawValue(this.dv)}else{return this.dv}}}},methods:{parse_date_format:function(a){if(this.subType=="date"){return this.value?this.value.substring(0,10):a}return a},el_datepicker_picker_options:function(){return this.srcvm.$options.methods.fetchCmptInfo.apply(this.srcvm,["getDatePickOptions",this.component,this.srcvm])},el_datepicker_change:function(a){this.$emit("cmpt-event","el_date_change",this.component.cmpt_code,a,this.srcvm)}}});CSMFUI.component("csmf-field-input",{name:"csmf-field-input",template:'<span class="csmf-field-input"><el-input v-show="!viewMode"    v-model="dv"    v-bind="cmptAttrs"    v-on="cmptListeners"    @keyup.enter.native="el_input_enter">    <slot name="prepend" slot="prepend"></slot>    <slot name="append" slot="append"></slot></el-input><span v-if="viewMode" v-text-more class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:[String,Number]},subType:{required:true}},data:function(){return{}},mixins:["csmf-mixin-cmpt"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(ELEMENT.Input.props,{type:a.subType,clearable:a.isClearable,"show-password":a.showPassword,autocomplete:"on","prefix-icon":a.component["prefix-icon"]||a.component.icon_before,"suffix-icon":a.component["suffix-icon"]||a.component.icon_after,autosize:a.$utils.getDefinedValue(a.component.autosize,a.component.line_rows)},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({input:this.el_input_input,change:this.el_input_change})},showPassword:function(){var a=this;return a.subType==="password"&&(typeof a.component["show-password"]==="undefined"?true:(a.component["show-password"]+""==="true"))},rawValue:function(){return this.subType==="password"?"······":this.dv}},methods:{el_input_enter:function(){this.$emit("cmpt-event","el_input_enter",this.component,this.srcvm)},el_input_input:function(a){this.$emit("cmpt-event","el_input_value_change",this.component.cmpt_code,a,this.srcvm)},el_input_change:function(a){this.$emit("cmpt-event","el_input_change",this.component.cmpt_code,a,this.srcvm)}}});CSMFUI.component("csmf-field-inputlabel",{name:"csmf-field-inputlabel",template:'<span class="csmf-field-inputlabel"><div v-show="!viewMode" class="el-input-label">    <div class="el-input-label-tags">        <template v-for="(tag,index) in labelValues">            <div :draggable="!component.disabled" :data-id="index"                 @dragover.prevent="inputlabel_dragover_event"                 @dragenter="inputlabel_dragenter_event"                 @dragend="inputlabel_dragend_event" style="font-size: 0;line-height: 1;margin: 5px 0;">                <el-tag :disable-transitions="true" type="info"                         style="text-overflow: ellipsis;overflow: hidden;white-space: nowrap;cursor: move;"                        :closable="!component.disabled" :data-id="index" :key="index"                        @close="remove_cmpt_inputLabel(index)">                    <span :title="showHidePop(tag.text)">{{tag.text}}</span>                </el-tag>            </div>        </template>    </div>    <div class="el-input-label-input">        <template v-if="!component.options">            <template v-if="!optionType">                <el-input v-model="inputValue"                          :suffix-icon="component.icon_after"                          :prefix-icon="component.icon_before"                          :disabled="!!component.disabled"                          :placeholder="component.placeholder"                          clearable>                </el-input>            </template>            <template v-else-if="optionType===\'timerange\'">                <el-time-picker is-range                                v-model="inputValue"                                :placeholder="component.placeholder"                                :disabled="!!component.disabled"                                :range-separator="$t(\'lang_key.csmf.import.to\')"                                :start-placeholder="$t(\'lang_key.csmf.import.startTime\')"                                :end-placeholder="$t(\'lang_key.csmf.import.endTime\')"                                value-format="HH:mm:ss">                </el-time-picker>            </template>            <template v-else-if="optionType===\'customer\'">                <render-template-label :cmpt="component" :data="srcvm.initData"></render-template-label>            </template>        </template>        <template v-else>            <template v-if="optionType === \'cascade\'">                <el-cascader v-model="inputValue"                             :placeholder="component.placeholder"                             :options="component.options"                             :filterable="!component.filter_forbidden"                             :clearable="!component.clear_forbidden"                             :disabled="!!component.disabled"                             :props="{value:\'id\',label:\'text\'}"                             :expand-trigger="\'hover\'"                             :change-on-select="component.change_on_click">                </el-cascader>            </template>            <template v-else>                <el-select v-model="inputValue"                           :placeholder="component.placeholder"                           :disabled="!!component.disabled"                           :filterable="!component.filter_forbidden"                           :clearable="!component.clear_forbidden">                    <el-option v-for="(option,index) in component.options"                               :label="option.text"                               :key="index"                               :value="option.id+\'\'"                               :disabled="!!option.disabled">                    </el-option>                </el-select>            </template>        </template>        <el-button :disabled="!!component.disabled"                   type="primary"                   @click.native="add_input_label_value">            {{$t(\'lang_key.csmf.import.addInput\')}}        </el-button>    </div></div><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:[String,Array]}},data:function(){return{inputValue:"",sortid:"",labelValues:[],checkedValues:[]}},mixins:["csmf-mixin-cmpt","csmf-mixin-cmpt-option"],computed:{optionType:function(){return this.component.optionType},rawValue:function(){if(this.component&&this.value){var a=this.translateValues(this.value);var c=[];for(var b in a){c.push(a[b]["text"])}return c.join(", ")}}},watch:{value:function(a){if(JSON.stringify(a)!==JSON.stringify(this.checkedValues)){this.checkedValues=a;this.translateValues(a)}},checkedValues:function(a){this.$emit("input",a)}},components:{"render-template-label":{render:function(a){if(typeof render_inputLabel_innerHtml==="function"){return render_inputLabel_innerHtml(this,this.component,this.data,a)}else{return a("span")}},props:{cmpt:{type:Object,required:true},data:{type:Object,required:true}}}},methods:{showHidePop:function(a){if(a.length>30){return a}else{return""}},inputlabel_dragover_event:function(a){a.dataTransfer.dropEffect="move"},inputlabel_dragenter_event:function(a){this.sortid=a.target.dataset.id||a.target.parentElement.dataset.id},inputlabel_dragend_event:function(c){if(c.dataTransfer.dropEffect!=="move"){return}var a=parseInt(c.target.dataset.id);var b=parseInt(this.sortid);var e=[];e=e.concat(this.labelValues);var d=e[a];e.splice(a,1);e.splice(b,0,d);this.labelValues=e},remove_cmpt_inputLabel:function(b){var a=this;a.labelValues.splice(b,1);a.checkedValues=a.labelValues.map(function(c){return c.id})},translateValues:function(c){var b=this,a=[];a=c.map(function(e){var d=b.transfer_current_label_value(e);if(d){return{id:e,text:d}}});b.labelValues=a;return a||[]},transfer_current_label_value:function(g){var c=this;if(c.component.options){var f=c.component.options;var a=[];if(c.component.optionType==="cascade"||c.component.optionType==="cascader"){for(var e=0;e<g.length;e++){for(var d=0;d<f.length;d++){if(g[e]+""===f[d].id+""){a[e]=f[d].text;f=f[d].children;break}}}a=a.join("/")}else{for(var b=0;b<f.length;b++){if(g+""===f[b].id+""){a=f[b].text;break}}}}if(c.component.optionType==="timerange"&&this.$utils.isArray(g)){a=g.join("~")}return a||g},check_is_checked:function(c){var a=this;var b=a.checkedValues.map(function(d){return JSON.stringify(d)});return b.indexOf(JSON.stringify(c))>=0},add_input_label_value:function(){var d=this;if(d.check_is_checked(d.inputValue)){d.inputValue=null;return}if(d.inputValue==null){return}var f=d.transfer_current_label_value(JSON.parse(JSON.stringify(d.inputValue)));if(!f||f.length<=0){return}if(d.component.optionType==="timerange"){var a=f.split("~");var e=Date.parse("2020-11-10 "+a[0]);var b=Date.parse("2020-11-10 "+a[1]);if(e>b){return}}var c=d.labelValues||[];c.push({id:d.inputValue,text:f});d.checkedValues=c.map(function(g){return g.id});d.inputValue=null}},created:function(){var a=this;a._getArrayValue();if(a.component.optionType==="cascade"||a.component.optionType==="cascader"){a._loadTreeOptions(this.component)}else{a._loadOptions(this.component)}}});CSMFUI.component("csmf-field-number",{name:"csmf-field-number",template:'<span class="csmf-field-number"><template v-if="isRange">    <div v-show="!viewMode" class="el-range-editor el-input__inner el-input-number el-input-number--numberrange" :class="rangeClass">        <el-input-number v-model="dv[0]"            class="el-range-input el-range-input-left"            v-bind="cmptAttrs"            v-on="cmptListeners">        </el-input-number>        <div class="el-range-separator">            至        </div>        <el-input-number v-model="dv[1]"            class="el-range-input el-range-input-right"            v-bind="cmptAttrs"            v-on="cmptListeners">        </el-input-number>    </div></template><template v-else>    <el-input-number         v-show="!viewMode"        v-model="dv"        v-bind="cmptAttrs"        v-on="cmptListeners">    </el-input-number></template><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:[String,Number,Array]},subType:{required:true}},data:function(){return{isActive:false}},mixins:["csmf-mixin-cmpt"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(ELEMENT.InputNumber.props,{clearable:a.isClearable,step:a.component.step||1,max:a.maxNum,min:a.minNum,precision:a.component.precision||0,"controls-position":"right"},a.$attrs)},cmptListeners:function(){if(this.isRange){return this._getCustomListeners({blur:this.el_number_blur,focus:this.el_number_focus,change:this.el_number_change})}else{return this._getCustomListeners({change:this.el_number_change})}},rangeClass:function(){var b={};b["el-range-editor--"+this.inputNumberSize]=true;b["is-active"]=this.isActive;b["is-disabled"]=this.cmptAttrs.disabled;return b},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},isRange:function(){return this.subType==="numberrange"||!!this.component["is-range"]},maxNum:function(){var a=this;if(a.$utils.isUndefined(a.component.max)){return 99999999999}else{return a.component.max}},minNum:function(){var a=this;if(a.$utils.isUndefined(a.component.min)){return -99999999999}else{return a.component.min}},dv:{get:function(){if(this.isRange){var a=this._getArrayValue(false);if(JSON.stringify(this.value)==="[null,null]"){a=[0,0]}if(JSON.stringify(a)!==JSON.stringify(this.value)){this.$emit("input",a)}return a}else{return this._getValue()}},set:function(a){if(JSON.stringify(a)==="[null,null]"){a=[0,0]}this.$emit("input",a)}},rawValue:function(){if(this.isRange){return this._getRangeRawValue(this.dv)}else{return this.dv}}},methods:{el_number_change:function(a){this.$emit("cmpt-event","el_number_change",this.component.cmpt_code,a,this.srcvm)},el_number_blur:function(a){this.isActive=false;this.$emit("blur",a)},el_number_focus:function(a){this.isActive=true;this.$emit("focus",a)}}});CSMFUI.component("csmf-field-radio",{name:"csmf-field-radio",template:'<span class="csmf-field-radio"><el-radio-group    v-show="!viewMode"    v-model="dv"    v-bind="cmptAttrs"    v-on="cmptListeners">    <template v-if="component.isRadioButton">    <el-radio-button v-for="option in component.options" :key="option.id" :label="option.id+\'\'" :name="component.cmpt_code" :disabled="option.disabled">    {{option.text}}    </el-radio-button>    </template>    <template v-else>    <el-radio v-for="option in component.options" :key="option.id" :label="option.id+\'\'" :name="component.cmpt_code" :disabled="!!option.disabled"         :style="component.optionWidth?{\'width\':component.optionWidth}:\'\'">    {{option.text}}    </el-radio>    </template></el-radio-group><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:[String,Number]}},data:function(){return{}},mixins:["csmf-mixin-cmpt","csmf-mixin-cmpt-option"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(ELEMENT.Radio.props,{},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({change:this.el_radio_change})},rawValue:function(){return this._getOptionsRawValue(this.dv).join(", ")}},methods:{el_radio_change:function(a){if(this.component.isRadioButton){this.$emit("cmpt-event","el_radioboxbutton_change",this.component.cmpt_code,a,this.srcvm)}else{this.$emit("cmpt-event","el_radiobox_change",this.component.cmpt_code,a,this.srcvm)}}},created:function(){this._loadOptions(this.component)}});CSMFUI.component("csmf-field-rate",{name:"csmf-field-rate",template:'<span class="csmf-field-rate"><el-rate    v-model="dv"    v-bind="cmptAttrs"    v-on="cmptListeners"></el-rate></span>',props:{value:{type:[Number,String]}},data:function(){return{}},mixins:["csmf-mixin-cmpt"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(ELEMENT.Rate.props,{},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({change:this.el_rate_change})},dv:{get:function(){var a=this._getValue(false);if(JSON.stringify(a)!==JSON.stringify(this.value)){this.$emit("input",a)}return parseFloat(a)||0},set:function(a){this.$emit("input",a)}}},methods:{el_rate_change:function(a){this.$emit("cmpt-event","el_rate_change",this.component.cmpt_code,a,this.srcvm)}}});CSMFUI.component("csmf-field-richeditor",{name:"csmf-field-richeditor",template:'<span class="csmf-field-richeditor"><div v-show="!readMode" class="el-rich-editor">    <div ref="toolbar" class="el-rich-editor-toolbar"></div>    <div ref="editor" class="el-rich-editor-text"></div></div><span v-if="readMode" class="el-form-item_text__content">    <span v-html="rawValue"></span></span></span>',props:{value:{type:String,"default":""}},mixins:["csmf-mixin-cmpt"],model:{prop:"value",event:"change"},data:function(){return{editor:null,info:null}},computed:{editable:function(){return !!!this.component.disabled},rawValue:function(){return this.value},readMode:function(){return this.viewMode||!this.editable}},watch:{value:function(a){if(a!==this.editor.txt.html()){this.editor.txt.html(this.value)}},editable:function(a){this.setStatus()}},mounted:function(){var a=this;if(window.wangEditor){a.setEditor()}else{$.getScript("vender/wangEditor/wangEditor.min.js").done(function(){a.setEditor()})}},methods:{setStatus:function(){var a=this;a.$nextTick(function(){if(a.component&&!a.editable){a.editor.disable()}else{a.editor.enable()}})},setEditor:function(){var a=this;var b=window.wangEditor;a.editor=new b(a.$el.querySelector(".el-rich-editor"));a.editor.config=Object.assign(a.editor.config,a.component||{},{emotions:[],menus:["head","bold","fontSize","fontName","italic","underline","strikeThrough","indent","lineHeight","foreColor","backColor","link","list","justify","quote","image","table","code","splitLine","undo","redo"],showLinkImg:false,uploadImgShowBase64:true,onchange:function(c){a.info=c;a.$emit("change",a.info);a.$emit("cmpt-event","el_richeditor_change",a.component.cmpt_code,a.info,a.srcvm)}});a.editor.create();a.editor.txt.html(a.value);a.setStatus()}},beforeDestroy:function(){if(this.editor){this.editor.destroy();this.editor=null}}});CSMFUI.component("csmf-field-select",{name:"csmf-field-select",template:'<span class="csmf-field-select"><el-select    v-show="!viewMode"    v-model="dv"    v-bind="cmptAttrs"    v-on="cmptListeners"><el-option v-if="showSelectAll"    :label="$t(\'lang_key.csmf.disp.selectall\')" key="-1" value="EL_ALL_SELECTED"></el-option><el-option v-for="(option,index) in component.options" :key="option.id" :label="option.text" :value="option.id+\'\'" :disabled="option.disabled"></el-option></el-select><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:[String,Array]}},data:function(){return{oldValue:[],isSelectAll:false}},mixins:["csmf-mixin-cmpt","csmf-mixin-cmpt-option"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(ELEMENT.Select.props,{multiple:a.isMultiple,clearable:a.isClearable,filterable:a.isFilterable,"collapse-tags":a.isCollapseTags,"class":a.$utils.getDefinedValue(a.component["show-inline"],a.component["show-inline"],a.component.showInline)?"inline_show_select":""},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({change:this.el_select_change})},isCollapseTags:function(){var a=this;if(a.$utils.isUndefined(a.component["collapse-tags"])&&a.$utils.isUndefined(a.component.collapse_tags)){return !!(a.$utils.getDefinedValue(a.component["select-all"],a.component.select_all)||a.isMultiple)}else{return !!a.component["collapse-tags"]||!!a.component.collapse_tags}},dv:{get:function(){if(this.isMultiple){return this._getArrayValue()}else{return this._getValue()}},set:function(a){this.$emit("input",a)}},showSelectAll:function(){return this.component.multiple&&this.component.select_all&&this.component.options.length>0},rawValue:function(){return this._getOptionsRawValue(this.dv).join(", ")}},methods:{el_select_change:function(c){var a=[];var b=this.oldValue.length>0?this.oldValue:[];if(c.indexOf("EL_ALL_SELECTED")>=0){if(b.indexOf("'EL_ALL_SELECTED'")>=0){this.dv=[];this.oldValue=[];this.isSelectAll=false}else{a=this.component.options.map(function(d){return d.id+""});this.dv=a;this.oldValue=["EL_ALL_SELECTED"].concat(a);this.isSelectAll=true}}else{this.dv=c;if(c.length===this.component.options.length){a=this.component.options.map(function(d){return d.id+""});this.oldValue=["EL_ALL_SELECTED"].concat(a);this.isSelectAll=true}else{this.oldValue=c;this.isSelectAll=false}}this.$emit("cmpt-event","el_select_change",this.component.cmpt_code,c,this.srcvm)}},created:function(){this._loadOptions(this.component)}});CSMFUI.component("csmf-field-slider",{name:"csmf-field-slider",template:'<span class="csmf-field-slider"><el-slider     v-show="!viewMode"    v-model="dv"    v-bind="cmptAttrs"    v-on="cmptListeners"></el-slider><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:[Number,String,Array]}},data:function(){return{}},mixins:["csmf-mixin-cmpt"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(ELEMENT.Slider.props,{step:a.component.step||10,"format-tooltip":a.el_slider_format_tooltip},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({change:this.el_slider_change})},isRange:function(){return this.component.range},dv:{get:function(){if(this.isRange){var a=this._getArrayValue(false);if(JSON.stringify(this.value)==="[null,null]"){a=[0,0]}if(this.$utils.isArray(a)&&a.length>0){a=[parseFloat(a[0])||0,parseFloat(a[1])||0]}else{a=[0,0]}if(JSON.stringify(a)!==JSON.stringify(this.value)){this.$emit("input",a)}return a}else{var a=this._getValue(false);if(JSON.stringify(a)!==JSON.stringify(this.value)){this.$emit("input",a)}return parseFloat(a)||0}},set:function(a){if(JSON.stringify(a)==="[null,null]"){a=[0,0]}this.$emit("input",a)}},rawValue:function(){return this._getRangeRawValue(this.dv)}},methods:{el_slider_format_tooltip:function(a){return this.srcvm.$options.methods.fetchCmptInfo.apply(this.srcvm,["el_slider_format_tooltip",this.component.cmpt_code,a,this.srcvm])},el_slider_change:function(a){this.$emit("cmpt-event","el_slider_change",this.component.cmpt_code,a,this.srcvm)}}});CSMFUI.component("csmf-field-switch",{name:"csmf-field-switch",template:'<span class="csmf-field-switch"><el-switch     v-show="!viewMode"     v-model="dv"    v-bind="cmptAttrs"    v-on="cmptListeners"></el-switch><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:[String,Boolean,Number]}},data:function(){return{}},mixins:["csmf-mixin-cmpt"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(ELEMENT.Switch.props,{"active-value":a.component.options[0]["id"],"active-text":a.component.options[0]["text"],"inactive-value":a.component.options[1]["id"],"inactive-text":a.component.options[1]["text"],"active-color":(a.component["active-color"]||a.component.active_color||a.component.active_value_color)+"","inactive-color":(a.component["inactive-color"]||a.component.inactive_color||a.component.inactive_value_color)+""},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({change:this.el_switch_change})},dv:{get:function(){var a=this._getValue(true,this.cmptAttrs["inactive-value"]);return a+""},set:function(a){this.$emit("input",a+"")}},rawValue:function(){return(this.dv+""===this.cmptAttrs["active-value"]+"")?this.cmptAttrs["active-text"]:this.cmptAttrs["inactive-text"]}},methods:{el_switch_change:function(a){this.$emit("cmpt-event","el_switch_change",this.component.cmpt_code,a+"",this.srcvm)},_loadOptions:function(){var a=this;a.component.options=[{id:(a.component["active-value"]||a.component.active_value||1)+"",text:(a.component["active-text"]||a.component.active_text||"")+""},{id:(a.component["inactive-value"]||a.component.inactive_value||0)+"",text:(a.component["inactive-text"]||a.component.inactive_text||"")+""}]}},created:function(){this._loadOptions()}});CSMFUI.component("csmf-field-timepicker",{name:"csmf-field-timepicker",template:'<span class="csmf-field-timepicker"><template v-if="isSelect">    <el-time-select         v-show="!viewMode"        v-model="dv"        v-bind="cmptAttrs"        v-on="cmptListeners">    </el-time-select></template><template v-else>    <el-time-picker         v-show="!viewMode"        v-model="dv"        v-bind="cmptAttrs"        v-on="cmptListeners">    </el-time-picker></template><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:[String,Array]},subType:{required:true}},data:function(){return{}},mixins:["csmf-mixin-cmpt"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(null,{"is-range":a.isRange,"picker-options":a.el_timepicker_picker_options(),"range-separator":a.$t("lang_key.csmf.import.to"),"start-placeholder":a.$t("lang_key.csmf.import.startTime"),"end-placeholder":a.$t("lang_key.csmf.import.endTime"),"value-format":"HH:mm:ss"},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({change:this.el_timepicker_change})},isRange:function(){return this.subType==="timerange"||this.component["is-range"]},isSelect:function(){return this.subType==="timeselect"},dv:{get:function(){if(this.isRange){var a=this._getArrayValue();return JSON.stringify(a)==="[]"?"":a}else{return this._getValue()}},set:function(a){if(this.isRange){a=a===null?[]:a}else{a=a===null?"":a}this.$emit("input",a)}},rawValue:function(){return this._getRangeRawValue(this.dv)}},methods:{el_timepicker_picker_options:function(){return this.srcvm.$options.methods.fetchCmptInfo.apply(this.srcvm,["getTimePickOptions",this.component,this.srcvm])},el_timepicker_change:function(a){this.$emit("cmpt-event","el_date_change",this.component.cmpt_code,a,this.srcvm)}}});CSMFUI.component("csmf-field-transfer",{name:"csmf-field-transfer",template:'<span class="csmf-field-transfer"><el-transfer     v-show="!viewMode"    v-model="dv"     v-bind="cmptAttrs"    v-on="cmptListeners"></el-transfer><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:Array}},data:function(){return{}},mixins:["csmf-mixin-cmpt","csmf-mixin-cmpt-option"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(null,{"filter-placeholder":a.component["filter-placeholder"]||a.component.placeholder,filterable:a.isFilterable,data:a.component.options,titles:a.component.titles||a.component.transferTitle,props:{key:"id",label:"text",disabled:"disabled"},"render-content":a.el_render_content},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({change:this.el_transfer_change})},dv:{get:function(){return this._getArrayValue()},set:function(a){this.$emit("input",a)}},rawValue:function(){return this._getOptionsRawValue(this.dv).join(", ")}},methods:{el_render_content:function(c,b){var a=this.srcvm.$options.methods.fetchCmptInfo.apply(this.srcvm,["render_transfer_title",c,b,this.srcvm]);if(!a){return c("span",{attrs:{title:b.text}},b.text)}},el_transfer_change:function(a){this.$emit("cmpt-event","el_transfer_change",this.component.cmpt_code,a,this.srcvm)}},created:function(){this._loadOptions(this.component)}});CSMFUI.component("csmf-field-treeselect",{name:"csmf-field-treeselect",template:'<span class="csmf-field-treeselect"><el-select     v-show="!viewMode"    :value="selectValue"     ref="input"    class="el-tree-select"    v-bind="cmptAttrs"    @input="el_select_change"    @clear="el_tree_select_clear"    @remove-tag="el_select_remove_tag">    <el-option value="-1" label="-1" style="padding: 0;height: auto; font-weight: normal">          <el-tree          ref="tree"         v-bind="treeAttrs""         @node-click="el_tree_select_click"         @check="el_tree_select_check"         ></el-tree>    </el-option>    <el-option v-for="(option,index) in mem" :key="option.id" :value="option.id" :label="option.text" style="display: none;"></el-option></el-select><span v-if="viewMode" class="el-form-item_text__content">    {{rawValue}}</span></span>',props:{value:{type:[String,Array]}},data:function(){return{selectValue:null,mem:[]}},mixins:["csmf-mixin-cmpt","csmf-mixin-cmpt-option"],computed:{cmptAttrs:function(){var a=this;return a._getCustomAttrs(ELEMENT.Select.props,{multiple:a.isMultiple,clearable:a.isClearable,filterable:a.isFilterable,"collapse-tags":a.isCollapseTags},a.$attrs)},cmptListeners:function(){return this._getCustomListeners({change:this.el_select_change})},isMultiple:function(){return this.component.multiple||!this.component.singleCheck},isCollapseTags:function(){var a=this;if(a.$utils.isUndefined(a.component["collapse-tags"])){return a.isMultiple}else{return !!a.component["collapse-tags"]}},rawValue:function(){return(this.mem.map(function(a){return a.text})||[]).join(", ")},treeAttrs:function(){var a=this;return a._getCustomAttrs(null,{"show-checkbox":a.isMultiple,"check-on-click-node":a.isMultiple,"check-strictly":false,"empty-text":a.$t("lang_key.csmf.global.noData"),"highlight-current":true,"node-key":a.component["tree-node-key"]===undefined?"_id":a.component["tree-node-key"],props:a.component["tree-props"]||{children:"children",label:"name"},"default-expand-all":a.component["default-expand-all"]===undefined?true:!!a.component["default-expand-all"],data:a.component.options},a.$attrs)},treeNodeKey:function(){return this.treeAttrs["node-key"]},treeNodeLabel:function(){return this.treeAttrs.props["label"]}},watch:{value:function(a){this.valueChange(a)},mem:function(a){var b=a.map(function(c){return c.id});if(!this.isMultiple){b=b.length>0?b[0]:""}this.$emit("input",b);this.$emit("cmpt-event","el_treeselect_change",this.component.cmpt_code,b,this.srcvm)}},methods:{valueChange:function(c){if(Object.prototype.toString.call(c)!=="[object Array]"){if(typeof c!=="undefined"&&c!==null&&c!==""){c=[c]}else{c=[]}}if(JSON.stringify(c)!==JSON.stringify(this.mem.map(function(a){return a.id}))){var b=c||[];this.setTreeCheckedKeys(b)}},setTreeCheckedKeys:function(b){var a=this;if(a.component&&a.component.options&&a.component.options.length>0){a.$refs.tree.setCheckedKeys(b||[]);a.$nextTick(function(){a.el_tree_select_check()})}},el_select_change:function(a){if(JSON.stringify(a)!==JSON.stringify(this.mem.map(function(b){return b.id}))){this.setTreeCheckedKeys(a)}},el_tree_select_clear:function(){this.setTreeCheckedKeys([])},el_select_remove_tag:function(c){var a=this.$refs.tree.$options.propsData.data[0];if(a&&(a._id==c||a.id==c)){this.el_tree_select_clear()}else{var b=this.$refs.tree.getNode(c);if(b){this.$refs.tree.setChecked(b,false,true)}}},_select_single_node:function(c){var b=this;if(!c){var a=b.$refs.tree.getCheckedNodes();if(a.length===1||b.$refs.tree.data[0]&&(a[0][b.treeNodeKey]===b.$refs.tree.data[0][b.treeNodeKey])){c=a[0];b.mem=[{id:c[b.treeNodeKey]+"",text:c[b.treeNodeLabel]+""}];b.selectValue=JSON.parse(JSON.stringify(b.mem[0]))}else{b.mem=[];b.selectValue=""}}else{b.mem=[{id:c[b.treeNodeKey]+"",text:c[b.treeNodeLabel]+""}];b.selectValue=JSON.parse(JSON.stringify(b.mem[0]));b.$refs.input.blur()}},_select_multiple_node:function(){var c=this;var a=c.$refs.tree.getCheckedNodes();c.mem=[];var b=!!c.treeAttrs.leafOnly;a.forEach(function(d){if(b){if(d.leaf){c.mem.push({id:d[c.treeNodeKey]+"",text:d[c.treeNodeLabel]+""})}}else{c.mem.push({id:d[c.treeNodeKey]+"",text:d[c.treeNodeLabel]+""})}});c.$nextTick(function(){c.selectValue=c.mem.map(function(d){return d.id})})},el_tree_select_click:function(c,b,d){var a=this;!a.isMultiple&&a._select_single_node(c,b,d)},el_tree_select_check:function(){var a=this;if(a.isMultiple){a._select_multiple_node()}else{a._select_single_node()}}},created:function(){var a=this;if(a.isMultiple){a._getArrayValue()}else{a._getValue()}a._loadTreeOptions(a.component,function(){a.$nextTick(function(){if(a.value){a.valueChange(a.value)}})})}});CSMFUI.mixin("csmf-mixin-cmpt",function(){return{props:{cmpt:{},srcvm:{}},computed:{component:function(){return this.cmpt},dv:{get:function(){return this._getValue()},set:function(a){this.$emit("input",a)}},viewMode:function(){return this.$utils.isTrue(this.component.readonly)},rawValue:function(){return this.dv},isMultiple:function(){return this.$utils.isTrue(this.component.multiple)},isClearable:function(){if(this.$utils.isUndefined(this.component.clearable)){if(this.$utils.isUndefined(this.component.clear_forbidden)){return true}else{return this.$utils.isFalse(this.component.clear_forbidden)}}else{return this.$utils.isTrue(this.component.clearable)}},isFilterable:function(){if(this.$utils.isUndefined(this.component.filterable)){if(this.$utils.isUndefined(this.component.filter_forbidden)){return true}else{return this.$utils.isFalse(this.component.filter_forbidden)}}else{return this.$utils.isTrue(this.component.filterable)}}},methods:{_getDefaultParam:function(){return this.$utils.getUnEmptyValue(this.component["default-param"],this.component.default_param,this.component.defaultParam,this.component.default_value)},_getCustomAttrs:function(d,c,f){var a=JSON.parse(JSON.stringify(this.component)),h={},b="",e,i=Object.assign(a,{disabled:!!a.disabled,title:a.title||a.cmpt_title},c,f||{}),g=d||i;for(e in i){if(i.hasOwnProperty(e)){b=this.$utils.camelize(e);if(b==="options"){if(!this.$utils.isArray(a.options)){continue}}if(this.$utils.hasOwn(g,b)||this.$utils.hasOwn(g,e)){h[e]=i[e]}else{if(["id","class","style","title","type"].indexOf(b)>=0){h[e]=i[e]}}}}return h},_getCustomListeners:function(c){var b={},a;for(a in this.component){if(this.component.hasOwnProperty(a)){if(this.$utils.hasOwn(this.component,a)&&this.$utils.isFunction(this.component[a])){b[a]=this.component[a]}}}return Object.assign(b,c||{})},_getValue:function(a,b){if(this.$utils.isUndefined(this.value)){return this._getDefaultValue(b,a)}return this.value},_getArrayValue:function(a,b){if(this.$utils.isUndefined(this.value)){return this._getDefaultArrayValue(b,a)}return this.value},_getDefaultValue:function(b,a){var c=this.$utils.isUndefined(b)?"":b;if(!this.$utils.isTrue(this.component.uninitialize)&&this.$utils.isDefined(this._getDefaultParam())){c=this._getDefaultParam()}(a===undefined||a)&&this.$emit("input",c);return c},_getDefaultArrayValue:function(c,b){var d=this.$utils.isUndefined(c)?[]:c,a;if(this.$utils.isFalse(this.component.uninitialize)&&this.$utils.isDefined(this._getDefaultParam())){try{a=this._getDefaultParam();if(this.$utils.isArray(a)){d=a}else{if(this.$utils.isString(this._getDefaultParam())){a=JSON.parse(this._getDefaultParam());if(this.$utils.isArray(a)){d=a}}}}catch(f){}}(b===undefined||b)&&this.$emit("input",d);return d},_getArrayRawValue:function(a){if(this.component){if(Object.prototype.toString.call(a)==="[object Array]"){return a.join(", ")}else{return a}}},_getRangeRawValue:function(a){if(this.component){if(Object.prototype.toString.call(a)==="[object Array]"){if(a.length===2){return a[0]+"~"+a[1]}else{return[]}}else{return a}}},_getOptionsRawValue:function(e){var a=[],d=0,c=0,b=0;if(this.component&&this.component.options&&this.component.options.length){if(e){if(Object.prototype.toString.call(e)==="[object Array]"){for(d=0;d<e.length;d++){for(c=0;c<this.component.options.length;c++){if(e[d]+""===this.component.options[c].id+""){a.push(this.component.options[c].text+"")}}}}else{for(b=0;b<this.component.options.length;b++){if(e+""===this.component.options[b].id+""){a.push(this.component.options[b].text+"")}}}}}return a}}}});CSMFUI.mixin("csmf-mixin-cmpt-event",function(){return{methods:{destroyVM:function(){this.$destroy()},_handleEvent:function(c){var a=this;var b=[].slice.call(arguments);var d=a[c];try{if(d&&typeof d==="function"){d.apply(a,b.slice(1))}else{b=["cmpt-event"].concat(b);a.$emit.apply(a,b)}}catch(f){console.error(f);a.$notify.error({title:"function error",message:c+"("+b+") ;"+f})}},handleCmptEvent:function(c){var a=this;var b=[].slice.call(arguments);var d=a[c];try{if(d&&typeof d==="function"){d.apply(a,b.slice(1))}else{d=window[c];if(d&&typeof d==="function"){d.apply(a,b.slice(1))}}}catch(f){console.error(f);a.$notify.error({title:"function error",message:c+"("+b+") ;"+f})}},fetchCmptInfo:function(c){var a=this;var b=[].slice.call(arguments);var d=a[c];if(d&&typeof d==="function"){return d.apply(a,b.slice(1))}else{d=window[c];if(d&&typeof d==="function"){return d.apply(a,b.slice(1))}}}}}});CSMFUI.mixin("csmf-mixin-cmpt-option",function(){return{methods:{_loadTreeOptions:function(h,g){var b=$.Deferred();var d=h.options,i=[],a=null,f=[],c="";if(d&&this.$utils.isObject(d)){if(d.data){a=$.Deferred();f.push(deferred.promise());a.resolve(d.data)}c=d.url}else{c=h.load_url}if(c){var e=get_last_pagedata_from_session();if(e){e.parentRowData.forEach(function(j){c=c.replace("{"+j.cmpt_code+"}",j.value)})}a=$.Deferred();f.push(a.promise());$.ajax({url:c}).done(function(k){var j=JSON.parse(k);if(h.transferTree||h["transfer-tree"]){j=array_to_tree(j,"id","pid","text")}a.resolve(j)})}if(f.length>0){$.when.apply($,f).then(function(){var j=Array.prototype.slice.call(arguments);j.forEach(function(k){k&&(i=i.concat(k))});h.options=i;b.resolve();g&&g(h)})}else{if(this.$utils.isArray(d)){h.options=d}b.resolve()}return b.promise()},_loadOptions:function(i,h){var b=$.Deferred();var c=i.options;var d=null;if(c&&this.$utils.isObject(c)){var j=[],a=null,f=[];if(c.data){a=$.Deferred();a.resolve(c.data);f.push(a.promise())}if(c.url){var g=c.url.split(",");var e=get_last_pagedata_from_session();g.forEach(function(k){if(d){k=k.replace("{id}",getRowKey(d));Object.keys(d).forEach(function(m){k=k.replace("{"+m+"}",d[m])})}if(e){e.parentRowData.forEach(function(m){k=k.replace("{"+m.cmpt_code+"}",m.value)})}var l=$.Deferred();$.ajax({url:k}).done(function(m){l.resolve(JSON.parse(m))});f.push(l.promise())})}if(f&&f.length>0){$.when.apply($,f).then(function(){var k=Array.prototype.slice.call(arguments);k.forEach(function(l){l&&(j=j.concat(l))});i.options_src=JSON.parse(JSON.stringify(i.options));i.options=j;b.resolve();h&&h(i)})}else{if(this.$utils.isArray(c)){i.options=c}b.resolve()}}else{if(this.$utils.isArray(c)){i.options=c}b.resolve()}return b.promise()}}}});CSMFUI.mixin("csmf-mixin-cmpt-visible",function(){return{data:function(){return{tVisibleChild:{},cid:""}},computed:{visible:function(){var b=this;var c=true;if(b.cmpt){if(b.cmpt.span!==undefined){c=(b.cmpt.span+""==="0")}}if(c){b.$emit("cmpt-visible",b.cid,false);return false}else{if(JSON.stringify(b.tVisibleChild)==="{}"){this.$emit("cmpt-visible",this.cid,true);return true}else{var a=0;Object.keys(b.tVisibleChild).forEach(function(d){if(b.tVisibleChild[d]){a++}});if(a>0){b.$emit("cmpt-visible",b.cid,true);return true}else{b.$emit("cmpt-visible",b.cid,false);return false}}}}},created:function(){var a="";if(this.cmpt){a=this.cmpt.cmpt_type+"_"+this.cmpt.cmpt_id}if(!this.cid){a=this.$options.name+"_"+new Date().getTime()}this.cid=a+""},methods:{_handleVisible:function(a,c){var b=this;if(b.tVisibleChild){b.tVisibleChild[a]=c;b.tVisibleChild=JSON.parse(JSON.stringify(b.tVisibleChild))}}}}});CSMFUI.component("csmf-column-boolean",{name:"csmf-column-boolean",template:"<span>{{showValue}}</span>",props:["cmpt","attrs","row","srcvm"],data:function(){return{}},computed:{cellValue:function(){return this.row[this.cmpt.cmpt_code]},trueText:function(){return this.cmpt.trueText||this.cmpt["true-text"]||this.cmpt.true_text||"是"},falseText:function(){return this.cmpt.falseText||this.cmpt["false-text"]||this.cmpt.false_text||"否"},trueValue:function(){return this.cmpt.trueValue||this.cmpt["true-value"]||this.cmpt.true_value||1},falseValue:function(){return this.cmpt.falseValue||this.cmpt["false-value"]||this.cmpt.false_value||0},isTrue:function(){return this.cellValue+""===this.trueValue+""},showValue:function(){return this.isTrue?this.trueText:this.falseText}}});CSMFUI.component("csmf-column-cascader",{name:"csmf-column-cascader",template:"<span>{{showValue}}</span>",props:["cmpt","attrs","row","srcvm"],data:function(){return{}},computed:{cellValue:function(){return this.row[this.cmpt.cmpt_code]},showValue:function(){if(this.cmpt&&this.cmpt.options&&this.cmpt.options.length&&!this.$utils.isEmpty(this.cellValue)){return this.translateOptionsValue(this.cmpt.options,this.cellValue).join(", ")}}},methods:{isMultiple:function(b){if(this.$utils.isArray(b)){for(var a=0;a<b.length;a++){if(this.$utils.isArray(b[a])){return true}}}return false},translateValue:function(h,a){var g=[],f="",d=null;var b=h;function e(k,l){if(k&&k.length){for(var i=0;i<k.length;i++){if(l+""===k[i].id+""){return k[i]}}}}for(var c=0;c<a.length;c++){f=a[c];d=e(b,f);if(d){g.push(d.text);if(d.children&&d.children.length){b=d.children}else{break}}else{break}}return g},translateOptionsValue:function(a,c){var d=[];if(this.cmpt){if(this.isMultiple(c)){for(var b=0;b<c.length;b++){d.push(this.translateValue(a,c[b]).join("/"))}}else{d.push(this.translateValue(a,c).join("/"))}}return d}}});CSMFUI.component("csmf-column-date",{name:"csmf-column-date",template:"<span>{{showValue}}</span>",props:["cmpt","attrs","row","srcvm"],data:function(){return{}},computed:{cellValue:function(){return this.row[this.cmpt.cmpt_code]},showValue:function(){if(this.cmpt&&!this.$utils.isEmpty(this.cellValue)){var a=this.cellValue;if(a.match(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/)){a=a.replace(new RegExp(/-/gm),"/")}return this.dateFormat(new Date(a))}}},methods:{dateFormat:function(e){if(this.cmpt&&this.cmpt.dateFormat&&this.cmpt.dateFormat.indexOf("WW")>=0){var c=this.$dateutil.toDate(e);var b=this.$dateutil.getWeekNumber(e);var d=c.getMonth();var f=new Date(c);if(b===1&&d===11){f.setHours(0,0,0,0);f.setDate(f.getDate()+3-(f.getDay()+6)%7)}var a=this.$dateutil.formatDate(f,this.cmpt.dateFormat);a=/WW/.test(a)?a.replace(/WW/,b<10?"0"+b:b):a.replace(/W/,b);return a}return this.$dateutil.formatDate(e,this.cmpt.dateFormat)}}});CSMFUI.component("csmf-column-html",{name:"csmf-column-html",template:'<span v-html="showValue"></span>',props:["cmpt","attrs","row","srcvm"],data:function(){return{}},computed:{cellValue:function(){return this.row[this.cmpt.cmpt_code]},showValue:function(){return this.cellValue}},methods:{}});CSMFUI.component("csmf-column-image",{name:"csmf-column-image",template:'<span @click.stop="el_handle_image_click">    <el-tag :type="showType">        <i :title="showTitle" :class="showValue"></i>    </el-tag></span>',props:["cmpt","attrs","row","srcvm"],data:function(){return{}},computed:{cellValue:function(){return this.row[this.cmpt.cmpt_code]},showValue:function(){return this.cellValue},showType:function(){return this.row[this.cmpt.cmpt_code+"_imgtype"]},showTitle:function(){return this.row[this.cmpt.cmpt_code+"_title"]}},methods:{el_handle_image_click:function(){this.$emit("cmpt-event","el_handle_image_click",this.cmpt.cmpt_code,this.row,this.srcvm)}}});CSMFUI.component("csmf-column-inputlabel",{name:"csmf-column-inputlabel",template:'<span>        <template v-if="!cmpt.options">            {{showValue}}        </template>        <template v-else>            <template v-if="optionType === \'cascade\'">                <csmf-column-cascader :cmpt="cmpt" :row="row" :srcvm="srcvm"></csmf-column-cascader>            </template>            <template v-else>                <csmf-column-options :cmpt="cmpt" :row="row" :srcvm="srcvm"></csmf-column-options>            </template>        </template>        </span>',props:["cmpt","attrs","row","srcvm"],data:function(){return{}},computed:{cellValue:function(){return this.row[this.cmpt.cmpt_code]},optionType:function(){return this.cmpt.optionType},showValue:function(){if(this.cmpt&&!this.$utils.isEmpty(this.cellValue)){return this.getShowValue(this.cellValue).join(", ")}}},methods:{getShowValue:function(d){var c=[];if(this.$utils.isArray(d)){for(var a=0;a<d.length;a++){var b=d[a];c.push(b)}}return c}}});CSMFUI.component("csmf-column-link",{name:"csmf-column-link",template:'<span style="line-height: 1.2" @click.stop="el_handle_link_click" >    <el-link type="info">{{showValue}}</el-link></span>',props:["cmpt","attrs","row","srcvm"],data:function(){return{}},computed:{cellValue:function(){return this.row[this.cmpt.cmpt_code]},showValue:function(){return this.cellValue}},methods:{el_handle_link_click:function(){this.$emit("cmpt-event","el_handle_link_click",this.cmpt.cmpt_code,this.row,this.srcvm)}}});CSMFUI.component("csmf-column-operations",{name:"csmf-column-operations",template:'<span class="csmf-column-operation">    <template v-for="(cmpt,index) in showOperations">        <template v-if="index<operationLimit">            <template                    v-if="cmpt.click===\'simplegrid_delete_column\' || cmpt.click===\'simplegrid_beforedelete_column\' || cmpt.click===\'simplegrid_delete_column_subtable\'">                <el-popconfirm :confirm-button-text="$t(\'lang_key.csmf.global.confirm\')"                               :cancel-button-text="$t(\'lang_key.csmf.global.cancel\')"                               icon="el-icon-info"                               icon-color="red"                               :title="deleteConfirmText(cmpt)"                               @onconfirm="rowButtonClick(cmpt)">                    <el-button slot="reference"                               size="mini"                               type="text"                               :class="operationClass(cmpt)"                               :disabled="isDisabled(cmpt)">                        {{cmpt.text}}                    </el-button>                </el-popconfirm>            </template>            <template v-else>                <span>                    <el-button size="mini"                               type="text"                               :disabled="isDisabled(cmpt)"                               @click.stop="rowButtonClick(cmpt)">                        {{cmpt.text}}                    </el-button>                </span>            </template>        </template>        <template v-else-if="index===operationLimit">            <el-dropdown>                <el-button size="mini" type="text" @click.stop icon="el-icon-more"></el-button>                <el-dropdown-menu slot="dropdown">                    <el-dropdown-item v-for="(subcmpt,subindex) in showOperations"                                      :key="subcmpt.cmpt_code" v-if="subindex>=operationLimit">                        <template                                v-if="subcmpt.click===\'simplegrid_delete_column\' || subcmpt.click===\'simplegrid_beforedelete_column\' || subcmpt.click===\'simplegrid_delete_column_subtable\'">                            <el-popconfirm :confirm-button-text="$t(\'lang_key.csmf.global.confirm\')"                                           :cancel-button-text="$t(\'lang_key.csmf.global.cancel\')"                                           icon="el-icon-info"                                           icon-color="red"                                           :title="deleteConfirmText(cmpt)"                                           @onconfirm="rowButtonClick(subcmpt)">                                <el-button slot="reference"                                           size="mini"                                           type="text"                                           :class="operationClass(subcmpt)"                                           :disabled="isDisabled(subcmpt)">                                    {{subcmpt.text}}                                </el-button>                            </el-popconfirm>                        </template>                        <template v-else>                            <span>                                <el-button size="mini"                                           type="text"                                           :disabled="isDisabled(subcmpt)"                                           @click.stop="rowButtonClick(subcmpt)">                                    {{subcmpt.text}}                                </el-button>                            </span>                        </template>                    </el-dropdown-item>                </el-dropdown-menu>            </el-dropdown>        </template>    </template></span>',props:{cmpt:{type:[Object,Array],"default":function(){return[]}},attrs:{type:Object},index:{type:Number,required:true},row:{type:Object,required:true},srcvm:{type:Object}},data:function(){return{}},computed:{actions:function(){var a=JSON.parse(JSON.stringify(this.cmpt.toolList||this.cmpt));a.forEach(function(b){b.type="text";b.size="mini";b.cmpt_name=""});return a},operationLimit:function(){var a=this;return a.attrs["operation-limit"]||a.attrs.operation_limit||3},showOperations:function(){var a=this;if(a.row){return a.actions.filter(function(b){return a.row[b.cmpt_code+"_display"]!=="none"})}},isDisabled:function(){return function(a){return this.row[a.cmpt_code+"_disabled"]}},operationClass:function(){var a=this;return function(b){return b.cmpt_code+"_delete_"+a.index}},deleteConfirmText:function(){var a=this;return function(b){return b.deleteConfirmMsg||a.attrs.deleteConfirmMsg||a.$t("lang_key.csmf.global.confirmDelete")}}},methods:{_handler:function(){var a=this,b=[].slice.call(arguments);b=["cmpt-event"].concat(b);a.$emit.apply(a,b)},rowButtonClick:function(cmpt){var param="",index=this.index,rowData=this.row;if(cmpt.param&&cmpt.param.length>0){if(cmpt.param.indexOf(",")!==0){param="("+JSON.stringify(rowData)+"),"+cmpt.param}else{param="("+JSON.stringify(rowData)+")"+cmpt.param}}else{param="("+JSON.stringify(rowData)+")"}try{if(param===""){eval("this._handler('"+cmpt.click+"')")}else{eval("this._handler('"+cmpt.click+"',"+param+")")}}catch(e){console.log(e);this.$notify.error({title:getI18nMessage("lang_key.csmf.global.error"),message:e.message+":"+param})}}}});CSMFUI.component("csmf-column-options",{name:"csmf-column-options",template:'<span>    <template v-if="showPopover">        <el-popover placement="top-start" :title="popoverTitle" width="200" trigger="hover">            <span v-html="popoverContent"></span>            <span slot="reference">{{showValue}}</span>        </el-popover>    </template>    <template v-else>        {{showValue}}    </template></span>',props:["cmpt","attrs","row","srcvm"],data:function(){return{}},computed:{cellValue:function(){return this.row[this.cmpt.cmpt_code]},isMultiple:function(){if(this.$utils.isArray(this.cellValue)){return true}return !!this.cmpt.multiple},showPopover:function(){return this.row[this.cmpt.cmpt_code+"_pop_content"]!=null},popoverTitle:function(){return this.row[this.cmpt.cmpt_code+"_pop_title"]},popoverContent:function(){return this.row[this.cmpt.cmpt_code+"_pop_content"]},showValue:function(){return this.translateOptionsValue(this.cellValue).join(", ")}},methods:{translateOptionsValue:function(f){var d=[],c=this.cmpt.options,a=f;if(c&&c.length){if(!this.isMultiple){a=[f]}for(var e=0;e<a.length;e++){for(var b=0;b<c.length;b++){if(a[e]+""===c[b].id+""){d.push(c[b].text)}}}return d}else{return[f]}}}});CSMFUI.component("csmf-column-progress",{name:"csmf-column-progress",template:'<span @click.stop="el_handle_progress_click">    <el-progress :text-inside="true" :stroke-width="16"                 :percentage="percentage"                 :status="status"                 :color="init_table_progress_color()"></el-progress></span>',props:["cmpt","attrs","row","srcvm"],data:function(){return{}},computed:{cellValue:function(){return this.row[this.cmpt.cmpt_code]},percentage:function(){if(this.cmpt&&!this.$utils.isEmpty(this.cellValue)){return parseFloat(this.cellValue)||0}return 0},status:function(){return this.percentage>=100?"success":null}},methods:{init_table_progress_color:function(){return this.srcvm.$options.methods.fetchCmptInfo.apply(this.srcvm,["init_table_progress_color",this.cmpt,this.row,this.srcvm])},el_handle_progress_click:function(){this.$emit("cmpt-event","el_handle_progress_click",this.cmpt.cmpt_code,this.row,this.srcvm)}}});CSMFUI.component("csmf-column-html",{name:"csmf-column-html",template:'<span><el-tag disable-transitions="true" :style="init_table_tag_style()">    {{showValue}}</el-tag></span>',props:["cmpt","attrs","row","srcvm"],data:function(){return{}},computed:{cellValue:function(){return this.row[this.cmpt.cmpt_code]},showValue:function(){return this.cellValue}},methods:{init_table_tag_style:function(){return this.srcvm.$options.methods.fetchCmptInfo.apply(this.srcvm,["init_table_tag_style",this.cmpt,this.row])}}});CSMFUI.component("csmf-column-text",{name:"csmf-column-text",template:"<span>{{showValue}}</span>",props:["cmpt","attrs","row","srcvm"],data:function(){return{}},computed:{cellValue:function(){return this.row[this.cmpt.cmpt_code]},showValue:function(){return this.cellValue}}});CSMFUI.component("csmf-column-treeselect",{name:"csmf-column-treeselect",template:"<span>{{showValue}}</span>",props:["cmpt","attrs","row","srcvm"],data:function(){return{treeNodeKey:"_id",treeProps:{children:"children",label:"name"}}},computed:{treeAttrs:function(){var a=this;return{"node-key":a.cmpt["tree-node-key"]===undefined?a.treeNodeKey:a.cmpt["tree-node-key"],props:a.cmpt["tree-props"]===undefined?a.treeProps:a.cmpt["tree-props"]}},cellValue:function(){return this.row[this.cmpt.cmpt_code]},showValue:function(){if(this.cmpt.options&&this.cmpt.options.length&&!this.$utils.isEmpty(this.cellValue)){return this.valueChange(this.cellValue).join(", ")}}},methods:{valueChange:function(f){var b=[],h,g=f;var j=this.cmpt.options||[],d=this.treeAttrs["node-key"],e=this.treeAttrs.props["label"],a=this.treeAttrs.props["children"];if(!this.$utils.isArray(f)){g=[f]}for(var c=0;c<g.length;c++){h=this.translateTree(j,d,e,a,g[c]);if(h){b.push(h)}}return b},translateTree:function(b,a,h,e,g){for(var d=0;d<b.length;d++){if(b[d][a]+""===g+""){return b[d][h]}else{var c=b[d][e];if(c&&c.length){var f=this.translateTree(c,a,h,e,g);if(f){return f}}}}}}});CSMFUI.component("csmf-table",{name:"csmf-table",template:'<div class="csmf-table">    <div class="csmf-table-header">        <csmf-toolbar :cmpt="toolbarCmpts" :attrs="attrsObj" :srcvm="srcvm" v-on:cmpt-event="_handleEvent"></csmf-toolbar>        <csmf-table-actionbar             :cmpt="actionbarCmpts"             :attrs="attrsObj"            :srcvm="srcvm"            :table-id="id"             :table-columns.sync="tableColumns"             v-on:cmpt-event="_handleEvent">        </csmf-table-actionbar>    </div>    <div class="csmf-table-body">        <el-table v-cloak                   :key="reflush"                  ref="table"                  stripe                  border                  :data="data"                  highlight-current-row                  v-loading="pagination.loading "                  :element-loading-text="$t(\'lang_key.csmf.global.loading\')"                  @selection-change="handleSelectionChange"                  @row-click="handleRowClick"                  @sort-change="handleSortChange">            <template v-if="attrsObj.multipleTable">                <el-table-column type="selection" width="50"></el-table-column>            </template>            <template v-for="cmpt in showColumns">                <template v-if="cmpt.columns">                    <el-table-column :label="cmpt.cmpt_name">                        <template v-for="subcmpt in cmpt.columns">                            <el-table-column                                :key="subcmpt.cmpt_id"                                :show-overflow-tooltip="true"                                :fixed="columnFixed(subcmpt)"                                :sortable="columnSortable(subcmpt)"                                :label="columnLabel(subcmpt)"                                :width="columnWidth(subcmpt)"                                :min-width="columnMinWidth(subcmpt)"                                :prop="columnProp(subcmpt)">                                <template slot="header" slot-scope="scope">                                    <csmf-table-header-render :cmpt="subcmpt" :column="scope"></csmf-table-header-render>                                </template>                                <template slot-scope="scope">                                    <component :is="columnType(subcmpt)"                                         :cmpt="subcmpt"                                         :attrs="attrsObj"                                         :row="scope.row"                                        :index="scope.$index"                                         :srcvm="srcvm"                                        v-on:cmpt-event="_handleEvent"></component>                                </template>                            </el-table-column>                        </template>                    </el-table-column>                </template>                <template v-else>                    <el-table-column                        :key="cmpt.cmpt_id"                        :show-overflow-tooltip="true"                        :fixed="columnFixed(cmpt)"                        :sortable="columnSortable(cmpt)"                        :label="columnLabel(cmpt)"                        :width="columnWidth(cmpt)"                        :min-width="columnMinWidth(cmpt)"                        :prop="columnProp(cmpt)">                        <template slot="header" slot-scope="scope">                            <csmf-table-header-render :cmpt="cmpt" :column="scope"></csmf-table-header-render>                        </template>                        <template slot-scope="scope">                            <component :is="columnType(cmpt)"                                 :cmpt="cmpt"                                 :attrs="attrsObj"                                 :row="scope.row"                                :index="scope.$index"                                 :srcvm="srcvm"                                v-on:cmpt-event="_handleEvent"></component>                        </template>                    </el-table-column>                </template>            </template>        </el-table>    </div>    <div class="csmf-table-footer" >        <csmf-table-pagebar v-if="!attrsObj.paginationHidden"             :cmpt="pageBarCmpts"             :attrs="attrsObj"             :srcvm="srcvm"             :pagination.sync="pagination"             v-on:cmpt-event="_handleEvent"></csmf-table-pagebar>    </div></div>',props:{id:{required:true},keyColumn:{type:String},data:{type:Array},selection:{type:Array},pagination:{type:Object},attrs:{type:Object},cmpts:{type:Array,"default":function(){return[]}},srcvm:{type:Object}},data:function(){return{selectionValues:[],tableCmpts:[],showColumns:[],allColumns:[],reflush:true}},watch:{selection:function(b){if(JSON.stringify(b)!==JSON.stringify(this.selectionValues)){if(b){var a=this;b.forEach(function(c){var d=a.getRowKey(c);a.data.forEach(function(e){if(a.getRowKey(e)==d){a.$refs.table.toggleRowSelection(e)}})})}}},cmpts:{handler:function(a){if(JSON.stringify(this.tableCmpts)!==JSON.stringify(a)){this.updateTableCmpts(a)}},deep:true}},mixins:["csmf-mixin-cmpt-option"],computed:{attrsObj:function(){return this.attrs},tableColumns:{get:function(){return this.allColumns},set:function(b){var a=this;a.allColumns=b;a.$nextTick(function(){var c=JSON.parse(JSON.stringify(b));a.showColumns=JSON.parse(JSON.stringify(a.generateColumns(c)));a.$refs.table.doLayout();a.reflush=!a.reflush})}},operationCmpts:function(){var a=this;return a.tableCmpts.filter(function(b){return a.checkIsShowOperationCmpt(b)})},pageBarCmpts:function(){var a=this;return a.tableCmpts.filter(function(b){return a.checkIsShowPageBarCmpt(b)})},toolbarCmpts:function(){var a=this;return{cmpt_type:"toolbar",span:1,is_hidden:"",toolList:a.tableCmpts.filter(function(b){return a.checkIsShowToolbarCmpt(b)})}},actionbarCmpts:function(){var a=this;return{cmpt_type:"table-actionbar",span:1,is_hidden:"",toolList:a.tableCmpts.filter(function(b){return a.checkIsShowActionbarCmpt(b)})}},columnFixed:function(){return function(a){return a.fixed||(a.new_line+""==="1")}},columnSortable:function(){var a=this;return function(b){if(a.attrs.sort_disabled){return false}else{if(b.sort_disabled){return false}else{if(a.$utils.isDefined(b.sortable)){return !!b.sortable}else{return"customer"}}}}},columnLabel:function(){return function(a){return a.cmpt_name}},columnWidth:function(){return function(a){return a.width||a.span}},columnMinWidth:function(){return function(a){return a.minWidth||a.offset}},columnProp:function(){return function(a){return a.prop||a.cmpt_code}},columnType:function(){var a=this;return function(b){return a.getColumnType(b)}}},methods:{getRowKey:function(a){if(this.keyColumn){return a[this.keyColumn]}return""},getStorageHabit:function(){var b=this;if(b.id){var a=localStorage.getItem("csmf_table_set_"+b.id);if(a){try{a=JSON.parse((a));return a}catch(c){}}}return{}},generateColumns:function(d){var k=this;var a=k.getStorageHabit();var j=[];function f(l){for(var m=0;m<d.length;m++){if(d[m].cmpt_code===l){return d[m]}}}function g(l){for(var m=0;m<d.length;m++){if(d[m]["subColumns"]){var n=d[m]["subColumns"];if(k.$utils.isString(n)&&n.length>0){n=n.split(",");if(n.indexOf(l.cmpt_code)>=0){return false}}}}return true}function h(l){var i=[],o=l.subColumns;if(k.$utils.isString(o)&&o.length>0){o=o.split(",")}for(var n=0;n<o.length;n++){var m=f(o[n]);if(m){i.push(m)}}return i}function b(n,m){var l=k.getColumnHabit(n,m);if(l.show){var o;if(n.subColumns){var i=h(n);i=i.filter(function(p){return b(p,m)});if(i.length>0){n.columns=i;o=n}}else{if(n.cmpt_type==="operations"){n.toolList=k.operationCmpts}o=n}if(o){o=Object.assign(o,l);return o}}}for(var e=0;e<d.length;e++){var c=d[e];if(g(c)){c=b(c,a.columns);if(c){j.push(c)}}}return j},getColumnType:function(b){var c="csmf-column-";var a=b.cmpt_type;if(["boolean","date","html","image","link","progress","tag"," text"].indexOf(a)>=0){return c+a}else{if(["inputLabel"].indexOf(a)>=0){return c+"inputlabel"}else{if(["cascade","cascader"].indexOf(a)>=0){return c+"cascader"}else{if(["tree","treeselect"].indexOf(a)>=0){return c+"treeselect"}else{if(["date","week","month","monthrange","year","dates","daterange","datetime","datetimerange"].indexOf(a)>=0){return c+"date"}else{if(["operations"].indexOf(a)>=0){return c+"operations"}else{if(b.options){return c+"options"}else{return c+"text"}}}}}}}},getColumnHabit:function(c,b){var d={show:c.is_hidden+""!=="1"&&c.is_hidden+""!=="2",width:c.cmpt_type==="operations"?200:c.span,fixed:c.fixed};if(b){var a=b[c.cmpt_id];if(a){return Object.assign(d,a)}}return d},checkIsColumn:function(a){return a.load_way!=="url"&&a.cmpt_type!=="button"&&a.cmpt_type!=="timeCounter"&&a.place!=="toolbar"&&a.place!=="pagination"&&a.place!=="pagebar"&&a.place!=="actionbar"&&a.place!=="operation"},checkIsShowOperationCmpt:function(a){return a.load_way!=="url"&&(a.place!=="toolbar"&&a.place!=="pagination"&&a.place!=="pagebar"&&a.place!=="actionbar"||a.place==="operation")&&a.cmpt_type==="button"&&(a.is_hidden+""!=="1"&&a.is_hidden+""!=="2")},checkIsShowPageBarCmpt:function(a){return a.load_way!=="url"&&(a.place==="pagination"||a.place==="pagebar")&&(a.cmpt_type==="button"||a.cmpt_type==="timeCounter")&&(a.is_hidden+""!=="1"&&a.is_hidden+""!=="2")},checkIsShowToolbarCmpt:function(a){if(a.cmpt_code==="simplegrid_batchexport_toolbar"||a.click==="simplegrid_batchexport_toolbar"||a.cmpt_code==="simplegrid_batchimport_toolbar"||a.click==="simplegrid_batchimport_toolbar"){return false}return a.load_way!=="url"&&!a.isreturn&&a.place==="toolbar"&&a.cmpt_type==="button"&&(a.is_hidden+""!=="1"&&a.is_hidden+""!=="2")},checkIsShowActionbarCmpt:function(a){if(a.cmpt_code==="simplegrid_batchexport_toolbar"||a.click==="simplegrid_batchexport_toolbar"||a.cmpt_code==="simplegrid_batchimport_toolbar"||a.click==="simplegrid_batchimport_toolbar"){return true}return a.load_way!=="url"&&!a.isreturn&&a.place==="actionbar"&&a.cmpt_type==="button"&&(a.is_hidden+""!=="1"&&a.is_hidden+""!=="2")},getColumnByCode:function(a){var c=this.tableCmpts;for(var b=0;b<c.length;b++){if(c[b].cmpt_code===a){return c[b]}}},handleSelectionChange:function(a){this.selectionValues=a;this.$emit("update:selection",a)},handleRowClick:function(d,c,b){if(this.attrsObj.multipleTable){this.$refs.table.toggleRowSelection(d)}var a=[].slice.call(arguments);a=["cmpt-event","handleRowClick"].concat(a);this.$emit.apply(this,a)},handleSortChange:function(c){var b=c.prop;if(!b){this.attrsObj.orderColumPage=""}else{var a=this.getColumnByCode(b);if(a&&a.orderByAlias){b=a.orderByAlias}this.attrsObj.orderColumPage=b;this.attrsObj.orderDescPage=c.order==="descending"}this.$emit("update:attrs",this.attrsObj);this.$emit("cmpt-event","handleSortChanged",c,this.srcvm)},updateTableCmpts:function(b){var a=this;a.tableCmpts=b;var c=a.tableCmpts.filter(function(e){if(a.checkIsColumn(e)){return e}});c.push({cmpt_id:"operations",cmpt_code:"operations",cmpt_type:"operations",cmpt_name:a.$t("lang_key.csmf.simpleMainTable.oper"),width:a.attrsObj.operationWidth||200,is_hidden:a.$utils.isTrue(a.attrsObj.operationHidden)?"1":"",toolList:[],fixed:a.$utils.isDefined(a.attrsObj.operationFixed)?a.attrsObj.operationFixed:false});var d=[];c.forEach(function(f){var e=f.optionType||f.cmpt_type;if(["cascade","cascader"].indexOf(e)>=0){d.push(a._loadTreeOptions(f))}else{if(["tree","treeselect"].indexOf(e)>=0){d.push(a._loadTreeOptions(f))}else{if(f.options){d.push(a._loadOptions(f))}}}});a.tableColumns=c;$.when.apply($,d).then(function(){a.$nextTick(function(){a.tableColumns=JSON.parse(JSON.stringify(c))})})}},beforeMount:function(){this.updateTableCmpts(this.cmpts)},updated:function(){var a=this;a.$nextTick(function(){a.$refs.table.doLayout()})},components:{"csmf-table-header-render":{name:"csmf-table-header-render",render:function(c){var a=this.cmpt,b=this.column;if(!a.renderHeader){return c("span",{directives:[{name:"text-tip"}]},a.cmpt_name)}var d=window[a.renderHeader];if(d&&typeof d=="function"){return d.apply(null,[a,c,b])}else{return a.cmpt_name}},props:{cmpt:{type:Object,required:true},column:{type:Object,required:true}}}}});CSMFUI.component("csmf-table-actionbar",{name:"csmf-table-actionbar",template:'<span class="csmf-table-actionbar">    <span class="actionbar-item">        <el-button type="text" icon="el-icon-refresh-right" @click="refreshTableData"></el-button>    </span>    <csmf-table-set class="actionbar-item"                    :table-id="tableId"                    :table-columns.sync="_tableColumns">        <el-button slot="reference" type="text" icon="el-icon-setting"></el-button>    </csmf-table-set>    <span v-for="cmpt in actions" class="actionbar-item">        <component :is="\'csmf-\'+ cmpt.cmpt_type"             :attrs="attrs"             :key="cmpt.cmpt_id"             :cmpt="cmpt"             :srcvm="srcvm"             v-on:cmpt-event="_handleEvent" >        </component>    </span></span>',props:{cmpt:{type:Object},attrs:{type:Object},srcvm:{type:Object},tableId:{type:[String,Number]},tableColumns:{type:Array}},data:function(){return{}},computed:{actions:function(){var a=JSON.parse(JSON.stringify(this.cmpt.toolList));a.forEach(function(b){b.type="text";b.size="mini";b.cmpt_name=""});return a},_tableColumns:{get:function(){return this.tableColumns},set:function(a){this.$emit("update:tableColumns",a)}}},created:function(){},methods:{refreshTableData:function(){this.$emit("cmpt-event","refreshTableData",this.srcvm)}}});CSMFUI.component("csmf-table-pagebar",{name:"csmf-table-pagebar",template:'<el-pagination     class="csmf-table-pagebar"    background    @size-change="handleSizeChange"    @current-change="handleCurrentChange"    layout="total,->,slot,prev,pager,next,sizes"    :current-page.sync="pagination.pageNum"    :page-sizes="[5,10,15,25,50,100]"    :page-size="pagination.pageSize"    :total="pagination.totalCount">    <template v-for="cmpt in actions">        <component :is="\'csmf-\'+ cmpt.cmpt_type"             :attrs="attrs" :key="cmpt.cmpt_id"             :cmpt="cmpt"             :srcvm="srcvm"             v-on:cmpt-event="_handleEvent" >        </component>    </template></el-pagination>',data:function(){return{}},props:{cmpt:{type:Array},attrs:{type:Object},srcvm:{type:Object},pagination:{type:Object,"default":function(){return{pageNum:0,pageSize:10,totalCount:0,loading:false}}}},computed:{actions:function(){var a=JSON.parse(JSON.stringify(this.cmpt.toolList||this.cmpt));a.forEach(function(b){b.size="mini";if(b.cmpt_type==="timeCounter"){b.cmpt_type="countdown-select"}});return a},paginationObj:function(){return this.pagination}},methods:{handleSizeChange:function(c){this.paginationObj.pageSize=c;try{var a=localStorage.getItem("localePageSize");if(!a){a={}}else{a=JSON.parse(a)}a[page_data.businessId]=c;localStorage.setItem("localePageSize",JSON.stringify(a))}catch(b){}this.$emit("update:pagination",this.paginationObj);this.$emit("cmpt-event","handleSizeChange",c,this.srcvm)},handleCurrentChange:function(a){this.paginationObj.pageNum=a;this.$emit("update:pagination",this.paginationObj);this.$emit("cmpt-event","handleCurrentChange",a,this.srcvm)},el_countdown_select_event:function(a,b){this.$emit("cmpt-event","handleTimeCountChange",a,b,this.srcvm)},}});CSMFUI.component("csmf-table-set",{name:"csmf-table-set",template:'<el-popover    ref="tablesetpop"    placement="bottom-end"    trigger="click"    @show="showTableSetPop"    title="表格设置"    v-model="visible">    <div class="csmf-table-set">        <div style="padding: 10px">            <el-form size="mini">                <el-form-item label="操作列锁定">                    <el-switch v-model="fixOpColumn"></el-switch>                </el-form-item>                <el-form-item label="">                     <el-alert                        title="请选择您期望展示的列表信息！"                        type="info"                        show-icon>                    </el-alert>                    <el-checkbox :indeterminate="isIndeterminate" v-model="selectAll" @change="handleCheckAllChange">全选</el-checkbox>                    <el-checkbox-group v-model="checkList" style="width: 390px;display:block;line-height: 24px;"                         @change="handleCheckedCitiesChange">                        <el-checkbox v-for="(column,index) in tableColumns" size="small"                            style="width: 100px;"                            :label="column.cmpt_id"                            :key="index"><span :title="column.cmpt_name">{{column.cmpt_name}}</span></el-checkbox>                    </el-checkbox-group>                </el-form-item>            </el-form>        </div>        <div style="text-align: right; margin: 0">            <el-button size="mini" type="text" @click="visible = false">{{$t(\'el.popconfirm.cancelButtonText\')}}</el-button>            <el-button type="primary" size="mini" @click="handleConfirm">{{$t(\'el.popconfirm.confirmButtonText\')}}</el-button>        </div>    </div>    <slot name="reference" slot="reference"></slot></el-popover>',props:["tableId","tableColumns"],data:function(){return{visible:false,checkList:[],fixOpColumn:true,isIndeterminate:true,selectAll:false}},computed:{_tableColumns:{get:function(){return this.tableColumns},set:function(a){this.$emit("update:tableColumns",a)}}},methods:{handleCheckAllChange:function(c){var b=this;var a=[];b._tableColumns.forEach(function(d){a.push(d.cmpt_id)});this.checkList=c?a:[];this.isIndeterminate=false},handleCheckedCitiesChange:function(c){var a=this;var b=c.length;a.selectAll=b===a._tableColumns.length;a.isIndeterminate=b>0&&b<a._tableColumns.length},showTableSetPop:function(){var b=this;b.checkList=[];var a=[];var d=b.getStorageHabit();b._tableColumns.forEach(function(f){var e=b.getColumnHabit(f,d.columns);if(e.show){a.push(f.cmpt_id)}if(f.cmpt_type==="operations"){b.fixOpColumn=!!e.fixed}});b.checkList=a;var c=b.checkList.length;b.selectAll=c===b._tableColumns.length;b.isIndeterminate=c>0&&c<b._tableColumns.length},getStorageHabit:function(){var b=this;if(b.tableId){var a=localStorage.getItem("csmf_table_set_"+b.tableId);if(a){try{a=JSON.parse((a));return a}catch(c){}}}return{}},getColumnHabit:function(c,b){var d={show:c.is_hidden+""!=="1"&&c.is_hidden+""!=="2",width:c.span,fixed:c.fixed};if(b){var a=b[c.cmpt_id];if(a){return Object.assign(d,a)}}return d},handleConfirm:function(){var c=this,d=this.checkList;var a=JSON.parse(JSON.stringify(c._tableColumns));var e={};a.forEach(function(f){if(d.indexOf(f.cmpt_id)>=0){f.is_hidden=""}else{f.is_hidden="1"}e[f.cmpt_id]={show:f.is_hidden==="",width:f.span,fixed:f.fixed};if(f.cmpt_type==="operations"){e[f.cmpt_id].fixed=!!c.fixOpColumn?"right":false}});c.visible=false;var b={columns:e};c._tableColumns=a;localStorage.setItem("csmf_table_set_"+c.tableId,JSON.stringify(b));c.$emit("on-confirm")}}});CSMFUI.util("dateUtil",function(){var c=this;(function(k){var h={};var l=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g;var x="\\d\\d?";var v="\\d{3}";var i="\\d{4}";var s="[^\\s]+";var r=/\[([^]*?)\]/gm;var j=function(){};function y(z){return z.replace(/[|\\{()[^$+*?.-]/g,"\\$&")}function o(A,B){var D=[];for(var C=0,z=A.length;C<z;C++){D.push(A[C].substr(0,B))}return D}function q(z){return function(D,A,C){var B=C[z].indexOf(A.charAt(0).toUpperCase()+A.substr(1).toLowerCase());if(~B){D.month=B}}}function t(A,z){A=String(A);z=z||2;while(A.length<z){A="0"+A}return A}var w=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var n=["January","February","March","April","May","June","July","August","September","October","November","December"];var g=o(n,3);var p=o(w,3);h.i18n={dayNamesShort:p,dayNames:w,monthNamesShort:g,monthNames:n,amPm:["am","pm"],DoFn:function f(z){return z+["th","st","nd","rd"][z%10>3?0:(z-z%10!==10)*z%10]}};var u={D:function(z){return z.getDay()},DD:function(z){return t(z.getDay())},Do:function(z,A){return A.DoFn(z.getDate())},d:function(z){return z.getDate()},dd:function(z){return t(z.getDate())},ddd:function(z,A){return A.dayNamesShort[z.getDay()]},dddd:function(z,A){return A.dayNames[z.getDay()]},M:function(z){return z.getMonth()+1},MM:function(z){return t(z.getMonth()+1)},MMM:function(z,A){return A.monthNamesShort[z.getMonth()]},MMMM:function(z,A){return A.monthNames[z.getMonth()]},yy:function(z){return t(String(z.getFullYear()),4).substr(2)},yyyy:function(z){return t(z.getFullYear(),4)},h:function(z){return z.getHours()%12||12},hh:function(z){return t(z.getHours()%12||12)},H:function(z){return z.getHours()},HH:function(z){return t(z.getHours())},m:function(z){return z.getMinutes()},mm:function(z){return t(z.getMinutes())},s:function(z){return z.getSeconds()},ss:function(z){return t(z.getSeconds())},S:function(z){return Math.round(z.getMilliseconds()/100)},SS:function(z){return t(Math.round(z.getMilliseconds()/10),2)},SSS:function(z){return t(z.getMilliseconds(),3)},a:function(z,A){return z.getHours()<12?A.amPm[0]:A.amPm[1]},A:function(z,A){return z.getHours()<12?A.amPm[0].toUpperCase():A.amPm[1].toUpperCase()},ZZ:function(z){var A=z.getTimezoneOffset();return(A>0?"-":"+")+t(Math.floor(Math.abs(A)/60)*100+Math.abs(A)%60,4)}};var m={d:[x,function(A,z){A.day=z}],Do:[x+s,function(A,z){A.day=parseInt(z,10)}],M:[x,function(A,z){A.month=z-1}],yy:[x,function(C,z){var A=new Date(),B=+(""+A.getFullYear()).substr(0,2);C.year=""+(z>68?B-1:B)+z}],h:[x,function(A,z){A.hour=z}],m:[x,function(A,z){A.minute=z}],s:[x,function(A,z){A.second=z}],yyyy:[i,function(A,z){A.year=z}],S:["\\d",function(A,z){A.millisecond=z*100}],SS:["\\d{2}",function(A,z){A.millisecond=z*10}],SSS:[v,function(A,z){A.millisecond=z}],D:[x,j],ddd:[s,j],MMM:[s,q("monthNamesShort")],MMMM:[s,q("monthNames")],a:[s,function(C,z,A){var B=z.toLowerCase();if(B===A.amPm[0]){C.isPm=false}else{if(B===A.amPm[1]){C.isPm=true}}}],ZZ:["[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z",function(C,z){var B=(z+"").match(/([+-]|\d\d)/gi),A;if(B){A=+(B[1]*60)+parseInt(B[2],10);C.timezoneOffset=B[0]==="+"?A:-A}}]};m.dd=m.d;m.dddd=m.ddd;m.DD=m.D;m.mm=m.m;m.hh=m.H=m.HH=m.h;m.MM=m.M;m.ss=m.s;m.A=m.a;h.masks={"default":"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"};h.format=function(B,A,z){var C=z||h.i18n;if(typeof B==="number"){B=new Date(B)}if(Object.prototype.toString.call(B)!=="[object Date]"||isNaN(B.getTime())){throw new Error("Invalid Date in fecha.format")}A=h.masks[A]||A||h.masks["default"];var D=[];A=A.replace(r,function(F,E){D.push(E);return"@@@"});A=A.replace(l,function(E){return E in u?u[E](B,C):E.slice(1,E.length-1)});return A.replace(/@@@/g,function(){return D.shift()})};h.parse=function(C,G,H){var K=H||h.i18n;if(typeof G!=="string"){throw new Error("Invalid format in fecha.parse")}G=h.masks[G]||G;if(C.length>1000){return null}var J={};var z=[];var A=[];G=G.replace(r,function(M,L){A.push(L);return"@@@"});var I=y(G).replace(l,function(L){if(m[L]){var M=m[L];z.push(M[1]);return"("+M[0]+")"}return L});I=I.replace(/@@@/g,function(){return A.shift()});var E=C.match(new RegExp(I,"i"));if(!E){return null}for(var D=1;D<E.length;D++){z[D-1](J,E[D],K)}var F=new Date();if(J.isPm===true&&J.hour!=null&&+J.hour!==12){J.hour=+J.hour+12}else{if(J.isPm===false&&+J.hour===12){J.hour=0}}var B;if(J.timezoneOffset!=null){J.minute=+(J.minute||0)-+J.timezoneOffset;B=new Date(Date.UTC(J.year||F.getFullYear(),J.month||0,J.day||1,J.hour||0,J.minute||0,J.second||0,J.millisecond||0))}else{B=new Date(J.year||F.getFullYear(),J.month||0,J.day||1,J.hour||0,J.minute||0,J.second||0,J.millisecond||0)}return B};k.fecha=h})(c);var e=["sun","mon","tue","wed","thu","fri","sat"];var b=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];var a=function(j,g){var f=[];for(var h=j;h<=g;h++){f.push(h)}return f};var d=(function(f){return{getI18nSettings:function(){return{dayNamesShort:e.map(function(g){return new Vue().$t("el.datepicker.weeks."+g)}),dayNames:e.map(function(g){return new Vue().$t("el.datepicker.weeks."+g)}),monthNamesShort:b.map(function(g){return new Vue().$t("el.datepicker.months"+g)}),monthNames:b.map(function(h,g){return new Vue().$t("el.datepicker.month"+(g+1))}),amPm:["am","pm"]}},toDate:function(g){return this.isDate(g)?new Date(g):null},isDate:function(g){if(g===null||g===undefined){return false}if(isNaN(new Date(g).getTime())){return false}if(Array.isArray(g)){return false}return true},isDateObject:function(g){return g instanceof Date},formatDate:function(g,h){g=this.toDate(g);if(!g){return""}return f.format(g,h||"yyyy-MM-dd",this.getI18nSettings())},parseDate:function(g,h){return f.parse(g,h||"yyyy-MM-dd",this.getI18nSettings())},getDayCountOfMonth:function(g,h){if(h===3||h===5||h===8||h===10){return 30}if(h===1){if(g%4===0&&g%100!==0||g%400===0){return 29}else{return 28}}return 31},getDayCountOfYear:function(g){var h=g%400===0||(g%100!==0&&g%4===0);return h?366:365},getFirstDayOfMonth:function(h){var g=new Date(h.getTime());g.setDate(1);return g.getDay()},prevDate:function(g,h){h=h||1;return new Date(g.getFullYear(),g.getMonth(),g.getDate()-h)},nextDate:function(g,h){h=h||1;return new Date(g.getFullYear(),g.getMonth(),g.getDate()+h)},getStartDateOfMonth:function(i,j){var g=new Date(i,j,1);var h=g.getDay();if(h===0){return this.prevDate(g,7)}else{return this.prevDate(g,h)}},getWeekNumber:function(i){if(!this.isDate(i)){return null}var g=new Date(i.getTime());g.setHours(0,0,0,0);g.setDate(g.getDate()+3-(g.getDay()+6)%7);var h=new Date(g.getFullYear(),0,4);return 1+Math.round(((g.getTime()-h.getTime())/86400000-3+(h.getDay()+6)%7)/7)},getRangeHours:function(h){var g=[];var j=[];(h||[]).forEach(function(i){var l=i.map(function(m){return m.getHours()});j=j.concat(a(l[0],l[1]))});if(j.length){for(var k=0;k<24;k++){g[k]=j.indexOf(k)===-1}}else{for(var k=0;k<24;k++){g[k]=false}}return g},getPrevMonthLastDays:function(h,i){if(i<=0){return[]}var g=new Date(h.getTime());g.setDate(0);var j=g.getDate();return range(i).map(function(l,k){return j-(i-k-1)})},getMonthDays:function(h){var g=new Date(h.getFullYear(),h.getMonth()+1,0);var i=g.getDate();return range(i).map(function(k,j){return j+1})},setRangeData:function(g,l,h,k){for(var j=l;j<h;j++){g[j]=k}},getRangeMinutes:function(h,g){var j=new Array(60);if(h.length>0){var i=this;h.forEach(function(m){var q=m[0];var l=m[1];var p=q.getHours();var k=q.getMinutes();var o=l.getHours();var n=l.getMinutes();if(p===g&&o!==g){i.setRangeData(j,k,60,true)}else{if(p===g&&o===g){i.setRangeData(j,k,n+1,true)}else{if(p!==g&&o===g){i.setRangeData(j,0,n+1,true)}else{if(p<g&&o>g){i.setRangeData(j,0,60,true)}}}}})}else{this.setRangeData(j,0,60,true)}return j},range:function(g){return Array.apply(null,{length:g}).map(function(h,i){return i})},modifyDate:function(h,j,g,i){return new Date(j,g,i,h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds())},modifyTime:function(i,k,g,j){return new Date(i.getFullYear(),i.getMonth(),i.getDate(),k,g,j,i.getMilliseconds())},modifyWithTimeString:function(g,h){if(g==null||!h){return g}h=this.parseDate(h,"HH:mm:ss");return this.modifyTime(g,h.getHours(),h.getMinutes(),h.getSeconds())},clearTime:function(g){return new Date(g.getFullYear(),g.getMonth(),g.getDate())},clearMilliseconds:function(g){return new Date(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),0)},limitTimeRange:function(i,h,n){n=n||"HH:mm:ss";if(h.length===0){return i}var m=function(p){return f.parse(f.format(p,n),n)};var l=m(i);var o=h.map(function(p){return p.map(m)});if(o.some(function(p){return l>=p[0]&&l<=p[1]})){return i}var j=o[0][0];var g=o[0][0];o.forEach(function(p){j=new Date(Math.min(p[0],j));g=new Date(Math.max(p[1],j))});var k=l<j?j:g;return this.modifyDate(k,i.getFullYear(),i.getMonth(),i.getDate())},timeWithinRange:function(g,i,j){var h=this.limitTimeRange(g,i,j);return h.getTime()===g.getTime()},changeYearMonthAndClampDate:function(h,i,j){var g=Math.min(h.getDate(),this.getDayCountOfMonth(i,j));return this.modifyDate(h,i,j,g)},prevMonth:function(g){var h=g.getFullYear();var i=g.getMonth();return i===0?this.changeYearMonthAndClampDate(g,h-1,11):this.changeYearMonthAndClampDate(g,h,i-1)},nextMonth:function(g){var h=g.getFullYear();var i=g.getMonth();return i===11?this.changeYearMonthAndClampDate(g,h+1,0):this.changeYearMonthAndClampDate(g,h,i+1)},prevYear:function(g,h){h=h||1;var i=g.getFullYear();var j=g.getMonth();return this.changeYearMonthAndClampDate(g,i-h,j)},nextYear:function(g,h){h=h||1;var i=g.getFullYear();var j=g.getMonth();return this.changeYearMonthAndClampDate(g,i+h,j)},extractDateFormat:function(g){return g.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim()},extractTimeFormat:function(g){return g.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?y{2,4}/g,"").trim()},validateRangeInOneMonth:function(h,g){return(h.getMonth()===g.getMonth())&&(h.getFullYear()===g.getFullYear())}}})(c.fecha);Vue.prototype.$dateutil=d;return d});CSMFUI.util("dialog",function(){var b;var e=[];var c=1;var a=Vue.extend({template:'<el-dialog v-dialog_draggable :visible.sync="visible" v-bind="$props"><csmf-render-url-content v-if="visible" :render-params="url"></csmf-render-url-content></el-dialog>',data:function(){return{visible:false,url:""}},props:ELEMENT.Dialog.props});var d=function(f){f=f||{};var g="dialog_"+c++;b=new a({data:{visible:false,url:""},propsData:Object.assign({closeOnClickModal:false,closeOnPressEscape:true,modal:true,modalAppendToBody:true,appendToBody:true,top:"10vh",width:"50%",customClass:"csmf-dialog",destroyOnClose:true,beforeClose:f.onClose},f),mounted:function(){var h=this;this.$nextTick(function(){setTimeout(function(){h.url=f.url},200)})}});b.id=g;b.$mount();e.push(b);b.show=function(){b.visible=true};b.hide=function(){b.visible=false};b.close=function(){b.visible=false;b.$nextTick(function(){setTimeout(function(){b.$destroy()},500)})};return b};Vue.prototype.$dialog=d;return d});CSMFUI.directive("dialog_draggable",{bind:function(b){var d=b.querySelector(".el-dialog__header");var c=b.querySelector(".el-dialog");d.style.cursor="move";var a=c.currentStyle||window.getComputedStyle(c,null);d.onmousedown=function(j){var g=j.clientX-d.offsetLeft;var f=j.clientY-d.offsetTop;var h,i;if(a.left=="auto"){h=0;i=0}else{if(a.left.includes("%")){h=+document.body.clientWidth*(+a.left.replace(/\%/g,"")/100);i=+document.body.clientHeight*(+a.top.replace(/\%/g,"")/100)}else{h=+a.left.replace("px","");i=+a.top.replace("px","")}}document.onmousemove=function(m){var u=Number(c.style.left.replace("px",""));var r=Number(c.style.top.replace("px",""));var q=c.offsetLeft;var o=c.offsetTop;var k=m.clientX-g+h;var s=m.clientY-f+i;var p=k-u;if(p<0){if(-p>=q){k=u}}var n=s-r;if(n<0){if(-n>=o){s=r}}c.style.left=k+"px";c.style.top=s+"px"};document.onmouseup=function(k){document.onmousemove=null;document.onmouseup=null}}}});CSMFUI.util("domUtil",function(){var d=Vue.prototype.$isServer;var a=/([\:\-\_]+(.))/g;var g=/^moz([A-Z])/;var f=d?0:Number(document.documentMode);var c=(function(){if(!d&&document.addEventListener){return function(h,j,i){if(h&&j&&i){h.addEventListener(j,i,false)}}}else{return function(h,j,i){if(h&&j&&i){h.attachEvent("on"+j,i)}}}})();var e=(function(){if(!d&&document.removeEventListener){return function(h,j,i){if(h&&j){h.removeEventListener(j,i,false)}}}else{return function(h,j,i){if(h&&j){h.detachEvent("on"+j,i)}}}})();var b={trim:function(h){return(h||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},camelCase:function(h){return h.replace(a,function(i,k,j,l){return l?j.toUpperCase():j}).replace(g,"Moz$1")},on:c,off:e,once:function(i,j,h){var k=function(){if(h){h.apply(this,arguments)}e(i,j,k)};c(i,j,k)},hasClass:function(i,h){if(!i||!h){return false}if(h.indexOf(" ")!==-1){throw new Error("className should not contain space.")}if(i.classList){return i.classList.contains(h)}else{return(" "+i.className+" ").indexOf(" "+h+" ")>-1}},addClass:function(n,h){if(!n){return}var p=n.className;var m=(h||"").split(" ");for(var l=0,k=m.length;l<k;l++){var o=m[l];if(!o){continue}if(n.classList){n.classList.add(o)}else{if(!hasClass(n,o)){p+=" "+o}}}if(!n.classList){n.className=p}},removeClass:function(n,h){if(!n||!h){return}var m=h.split(" ");var p=" "+n.className+" ";for(var l=0,k=m.length;l<k;l++){var o=m[l];if(!o){continue}if(n.classList){n.classList.remove(o)}else{if(hasClass(n,o)){p=p.replace(" "+o+" "," ")}}}if(!n.classList){n.className=this.trim(p)}},getStyle:f<9?function(i,h){if(d){return}if(!i||!h){return null}h=this.camelCase(h);if(h==="float"){h="styleFloat"}try{switch(h){case"opacity":try{return i.filters.item("alpha").opacity/100}catch(j){return 1}default:return(i.style[h]||i.currentStyle?i.currentStyle[h]:null)}}catch(j){return i.style[h]}}:function(i,h){if(d){return}if(!i||!h){return null}h=this.camelCase(h);if(h==="float"){h="cssFloat"}try{var j=document.defaultView.getComputedStyle(i,"");return i.style[h]||j?j[h]:null}catch(k){return i.style[h]}},setStyle:function(i,h,j){if(!i||!h){return}if(typeof h==="object"){for(var k in h){if(h.hasOwnProperty(k)){this.setStyle(i,k,h[k])}}}else{h=this.camelCase(h);if(h==="opacity"&&f<9){i.style.filter=isNaN(j)?"":"alpha(opacity="+j*100+")"}else{i.style[h]=j}}},isScroll:function(j,i){if(d){return}var h=i!==null||typeof i!=="undefined";var k=h?i?this.getStyle(j,"overflow-y"):this.getStyle(j,"overflow-x"):this.getStyle(j,"overflow");return k.match(/(scroll|auto)/)},getScrollContainer:function(j,h){if(d){return}var i=j;while(i){if([window,document,document.documentElement].includes(i)){return window}if(this.isScroll(i,h)){return i}i=i.parentNode}return i},isInContainer:function(k,i){if(d||!k||!i){return false}var j=k.getBoundingClientRect();var h;if([window,document,document.documentElement,null,undefined].includes(i)){h={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}}else{h=i.getBoundingClientRect()}return j.top<h.bottom&&j.bottom>h.top&&j.right>h.left&&j.left<h.right}};Vue.prototype.$domUtil=b;return b});CSMFUI.util("drawer",function(){var a;var e=[];var b=1;var c=Vue.extend({template:'<el-drawer ref="drawer" v-drawer_draggable :visible.sync="visible" v-bind="$props" @closed="onClosed"><csmf-render-url-content class="el-drawer__content" :render-params="url"></csmf-render-url-content></el-drawer>',data:function(){return{url:""}},props:ELEMENT.Drawer.props,methods:{closeDrawer:function(){this.$refs.drawer&&this.$refs.drawer.closeDrawer()},onClosed:function(){var f=this;this.$nextTick(function(){setTimeout(function(){f.closeDrawer();f.$destroy()},500)})}}});var d=function(f){f=f||{};var g="drawer_"+b++;a=new c({data:{url:""},propsData:Object.assign({closeOnClickModal:false,closeOnPressEscape:true,modal:true,modalAppendToBody:true,appendToBody:true,size:"50%",customClass:"csmf-drawer",direction:"rtl",destroyOnClose:true,wrapperClosable:false,beforeClose:f.onClose},f),mounted:function(){var h=this;this.$nextTick(function(){setTimeout(function(){h.url=f.url},200)})}});a.id=g;a.$mount();e.push(a);a.show=function(){a.visible=true};a.hide=function(){a.visible=false};a.close=function(){a.visible=false;a.$nextTick(function(){setTimeout(function(){a.closeDrawer();a.$destroy()},500)})};return a};Vue.prototype.$drawer=d;return d});CSMFUI.directive("drawer_draggable",{bind:function(c){var d=c.querySelector(".el-drawer");Vue.prototype.$domUtil.addClass(d,"el-drawer-draggable");d.style.outline="none";var a=document.createElement("span");a.classList.add("el-drawer-drag-el");var b=document.createElement("i");b.classList.add("el-icon-more");a.appendChild(b);d.appendChild(a);a.onmousedown=function(g){var f=g.clientX;var h=d.clientWidth;d.classList.add("is-dragging");document.onmousemove=function(k){var i=k.clientX-f;var j=h-i;if(j>=document.body.clientWidth){j=document.body.clientWidth}if(j<=a.clientWidth){j=a.clientWidth}d.style.width=(j)+"px"};document.onmouseup=function(i){d.classList.remove("is-dragging");document.onmousemove=null;document.onmouseup=null}}}});CSMFUI.util("loadingBar",function(){var j={};var b=j.settings={minimum:0.08,easing:"ease",positionUsing:"",speed:200,trickle:true,trickleRate:0.02,trickleSpeed:800,showSpinner:true,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};j.configure=function(m){var n,o;for(n in m){o=m[n];if(o!==undefined&&m.hasOwnProperty(n)){b[n]=o}}return this};j.status=null;j.set=function(s){var m=j.isStarted();s=f(s,b.minimum,1);j.status=(s===1?null:s);var o=j.render(!m),p=o.querySelector(b.barSelector),q=b.speed,r=b.easing;o.offsetWidth;h(function(n){if(b.positionUsing===""){b.positionUsing=j.getPositioningCSS()}g(p,a(s,q,r));if(s===1){g(o,{transition:"none",opacity:1});o.offsetWidth;setTimeout(function(){g(o,{transition:"all "+q+"ms linear",opacity:0});setTimeout(function(){j.remove();n()},q)},q)}else{setTimeout(n,q)}});return this};j.isStarted=function(){return typeof j.status==="number"};j.start=function(){if(!j.status){j.set(0)}var m=function(){setTimeout(function(){if(!j.status){return}j.trickle();m()},b.trickleSpeed)};if(b.trickle){m()}return this};j.done=function(m){if(!m&&!j.status){return this}return j.inc(0.3+0.5*Math.random()).set(1)};j.inc=function(m){var o=j.status;if(!o){return j.start()}else{if(typeof m!=="number"){m=(1-o)*f(Math.random()*o,0.1,0.95)}o=f(o+m,0,0.994);return j.set(o)}};j.trickle=function(){return j.inc(Math.random()*b.trickleRate)};(function(){var m=0,n=0;j.promise=function(o){if(!o||o.state()==="resolved"){return this}if(n===0){j.start()}m++;n++;o.always(function(){n--;if(n===0){m=0;j.done()}else{j.set((m-n)/m)}});return this}})();j.render=function(m){if(j.isRendered()){return document.getElementById("loadingbar")}i(document.documentElement,"loadingbar-busy");var n=document.createElement("div");n.id="loadingbar";n.innerHTML=b.template;var q=n.querySelector(b.barSelector),o=m?"-100":c(j.status||0),p=document.querySelector(b.parent),r;g(q,{transition:"all 0 linear",transform:"translate3d("+o+"%,0,0)"});if(!b.showSpinner){r=n.querySelector(b.spinnerSelector);r&&k(r)}if(p!=document.body){i(p,"loadingbar-custom-parent")}p.appendChild(n);return n};j.remove=function(){l(document.documentElement,"loadingbar-busy");l(document.querySelector(b.parent),"loadingbar-custom-parent");var m=document.getElementById("loadingbar");m&&k(m)};j.isRendered=function(){return !!document.getElementById("loadingbar")};j.getPositioningCSS=function(){var m=document.body.style;var n=("WebkitTransform" in m)?"Webkit":("MozTransform" in m)?"Moz":("msTransform" in m)?"ms":("OTransform" in m)?"O":"";if(n+"Perspective" in m){return"translate3d"}else{if(n+"Transform" in m){return"translate"}else{return"margin"}}};function f(p,o,m){if(p<o){return o}if(p>m){return m}return p}function c(m){return(-1+m)*100}function a(q,o,p){var m;if(b.positionUsing==="translate3d"){m={transform:"translate3d("+c(q)+"%,0,0)"}}else{if(b.positionUsing==="translate"){m={transform:"translate("+c(q)+"%,0)"}}else{m={"margin-left":c(q)+"%"}}}m.transition="all "+o+"ms "+p;return m}var h=(function(){var n=[];function m(){var o=n.shift();if(o){o(m)}}return function(o){n.push(o);if(n.length==1){m()}}})();var g=(function(){var m=["Webkit","O","Moz","ms"],r={};function o(s){return s.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,u){return u.toUpperCase()})}function q(s){var u=document.body.style;if(s in u){return s}var t=m.length,w=s.charAt(0).toUpperCase()+s.slice(1),v;while(t--){v=m[t]+w;if(v in u){return v}}return s}function p(s){s=o(s);return r[s]||(r[s]=q(s))}function n(s,u,t){u=p(u);s.style[u]=t}return function(u,t){var s=arguments,w,v;if(s.length==2){for(w in t){v=t[w];if(v!==undefined&&t.hasOwnProperty(w)){n(u,w,v)}}}else{n(u,s[1],s[2])}}})();function e(n,m){var o=typeof n=="string"?n:d(n);return o.indexOf(" "+m+" ")>=0}function i(n,m){var p=d(n),o=p+m;if(e(p,m)){return}n.className=o.substring(1)}function l(n,m){var p=d(n),o;if(!e(n,m)){return}o=p.replace(" "+m+" "," ");n.className=o.substring(1,o.length-1)}function d(m){return(" "+(m.className||"")+" ").replace(/\s+/gi," ")}function k(m){m&&m.parentNode&&m.parentNode.removeChild(m)}Vue.prototype.$loadingBar=j;return j});CSMFUI.util("simpleRouter",function(){var k=[];var b={};var g=function(m,l){this.name=l;this.path=m;this.keys=[];this.fns=[];this.params={};this.regex=d(this.path,this.keys,false,false)};g.prototype.addHandler=function(l){this.fns.push(l)};g.prototype.removeHandler=function(m){for(var l=0,o=this.fns.length;l<o;l++){var n=this.fns[l];if(m==n){this.fns.splice(l,1);return}}};g.prototype.run=function(m){for(var l=0,n=this.fns.length;l<n;l++){this.fns[l].apply(this,m)}};g.prototype.match=function(q,s){var n=this.regex.exec(q);if(!n){return false}for(var p=1,l=n.length;p<l;++p){var o=this.keys[p-1];var r=("string"==typeof n[p])?decodeURIComponent(n[p]):n[p];if(o){this.params[o.name]=r}s.push(r)}return true};g.prototype.toURL=function(n){var l=this.path;for(var m in n){l=l.replace("/:"+m,"/"+n[m])}l=l.replace(/\/:.*\?/g,"/").replace(/\?/g,"");if(l.indexOf(":")!=-1){throw new Error("missing parameters for url: "+l)}return l};var d=function(o,n,m,l){if(o instanceof RegExp){return o}if(o instanceof Array){o="("+o.join("|")+")"}o=o.concat(l?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(r,t,u,s,p,q){n.push({name:s,optional:!!q});t=t||"";return""+(q?"":t)+"(?:"+(q?t:"")+(u||"")+(p||(u&&"([^/.]+?)"||"([^/]+?)"))+")"+(q||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)");return new RegExp("^"+o+"$",m?"":"i")};var j=function(o,n){var m=o.split(" ");var l=(m.length==2)?m[0]:null;o=(m.length==2)?m[1]:m[0];if(!b[o]){b[o]=new g(o,l);k.push(b[o])}b[o].addHandler(n)};var c=function(n,l){if(typeof l=="function"){j(n,l);c.reload()}else{if(typeof n=="object"){for(var m in n){j(m,n[m])}c.reload()}else{if(typeof l==="undefined"){c.navigate(n)}}}};c.lookup=function(m,o){for(var n=0,p=k.length;n<p;n++){var l=k[n];if(l.name==m){return l.toURL(o)}}};c.remove=function(n,m){var l=b[n];if(!l){return}l.removeHandler(m)};c.removeAll=function(){b={};k=[]};c.navigate=function(n,m){m=m||{};var l=m.silent||false;if(l){e()}setTimeout(function(){window.location.hash=n;if(l){setTimeout(function(){a()},1)}},1)};var f=function(){return window.location.hash.substring(1)};var h=function(m,l){var n=[];if(l.match(m,n)){l.run(n);return true}return false};var i=c.reload=function(){var n=f();for(var m=0,o=k.length;m<o;m++){var l=k[m];if(h(n,l)){return}}};var a=function(){if(window.addEventListener){window.addEventListener("hashchange",i,false)}else{window.attachEvent("onhashchange",i)}};var e=function(){if(window.removeEventListener){window.removeEventListener("hashchange",i)}else{window.detachEvent("onhashchange",i)}};a();Vue.prototype.$simpleRouter=c;return c});CSMFUI.util("spin",function(){var a=function(b,c){c=c||{};if(b){if(!window._globalLoading){window._globalLoading=GVUE.$message({message:c.message||GVUE.$t("lang_key.csmf.global.loading"),iconClass:"el-icon-loading",customClass:"el-message-loading",duration:0})}}else{GVUE.$nextTick(function(){setTimeout(function(){if(window._globalLoading){window._globalLoading.close();delete window._globalLoading}},800)})}};Vue.prototype.$spin=a;return a});CSMFUI.util("utils",function(){var b=Object.prototype.hasOwnProperty;function e(k,j){return b.call(k,j)}function c(l){var k=Object.create(null);return(function j(n){var m=k[n];return m||(k[n]=l(n))})}var d=/-(\w)/g;var a=c(function(j){return j.replace(d,function(k,l){return l?l.toUpperCase():""})});var f=c(function(j){return j.charAt(0).toUpperCase()+j.slice(1)});var g=/\B([A-Z])/g;var i=c(function(j){return j.replace(g,"-$1").toLowerCase()});var h={isTrue:function(j){if(this.isUndefined(j)||isNaN(j)||[0,"0",false,"false","null","undefined"].indexOf(j)>=0||!j){return false}else{return true}},isFalse:function(j){return !this.isTrue(j)},getDefinedValue:function(){var j=Array.prototype.slice.call(arguments),k;for(k=0;k<j.length;k++){if(this.isDefined(j[k])){return j[k]}}},getUnEmptyValue:function(){var j=Array.prototype.slice.call(arguments),k;for(k=0;k<j.length;k++){if(!this.isEmpty(j[k])){return j[k]}}},isArray:function(j){return Object.prototype.toString.call(j)==="[object Array]"},isString:function(j){return Object.prototype.toString.call(j)==="[object String]"},isNumber:function(j){return Object.prototype.toString.call(j)==="[object Number]"},isObject:function(j){return Object.prototype.toString.call(j)==="[object Object]"},isHtmlElement:function(j){return j&&j.nodeType===Node.ELEMENT_NODE},isFunction:function(j){var k={};return j&&k.toString.call(j)==="[object Function]"},isEmpty:function(j){return j===void 0||j===null||j===""},isUnEmpty:function(j){return !this.isEmpty(j)},isUndefined:function(j){return j===void 0},isDefined:function(j){return j!==void 0&&j!==null},hasOwn:e,camelize:a,capitalize:f,hyphenate:i};Vue.prototype.$utils=h;return h});